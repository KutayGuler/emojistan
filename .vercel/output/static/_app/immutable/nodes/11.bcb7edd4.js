import{S as G,i as I,s as R,e as y,b,O as E,h as f,a as v,c as B,k as m,q as T,l as d,m as h,r as P,n as p,U as N,G as D,P as w,u as q,T as S}from"../chunks/index.8e69b878.js";import{n as U}from"../chunks/notifications.048afdce.js";function C(o){let e,l;function s(r,u){var _;return(_=r[0].profileData)!=null&&_.bio?X:M}let a=s(o),t=a(o),i=o[0].isOwner&&O(o);return{c(){t.c(),e=v(),i&&i.c(),l=y()},l(r){t.l(r),e=B(r),i&&i.l(r),l=y()},m(r,u){t.m(r,u),b(r,e,u),i&&i.m(r,u),b(r,l,u)},p(r,u){a===(a=s(r))&&t?t.p(r,u):(t.d(1),t=a(r),t&&(t.c(),t.m(e.parentNode,e))),r[0].isOwner?i?i.p(r,u):(i=O(r),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},d(r){t.d(r),r&&f(e),i&&i.d(r),r&&f(l)}}}function F(o){let e,l,s,a,t=o[2]?"UPDATING":"UPDATE",i,r,u,_;return{c(){e=m("textarea"),l=v(),s=m("form"),a=m("button"),i=T(t),this.h()},l(n){e=d(n,"TEXTAREA",{class:!0,name:!0,cols:!0,rows:!0}),h(e).forEach(f),l=B(n),s=d(n,"FORM",{class:!0});var c=h(s);a=d(c,"BUTTON",{type:!0,class:!0});var k=h(a);i=P(k,t),k.forEach(f),c.forEach(f),this.h()},h(){p(e,"class","textarea-bordered textarea mb-2 h-full bg-base-200 text-2xl text-neutral"),p(e,"name","bio"),p(e,"cols","30"),p(e,"rows","10"),p(a,"type","submit"),p(a,"class",r="btn-primary btn-sm btn w-fit "+(o[2]?"loading":"")),p(s,"class","self-end")},m(n,c){b(n,e,c),N(e,o[0].profileData.bio),b(n,l,c),b(n,s,c),D(s,a),D(a,i),u||(_=[w(e,"input",o[4]),w(s,"submit",o[3])],u=!0)},p(n,c){c&1&&N(e,n[0].profileData.bio),c&4&&t!==(t=n[2]?"UPDATING":"UPDATE")&&q(i,t),c&4&&r!==(r="btn-primary btn-sm btn w-fit "+(n[2]?"loading":""))&&p(a,"class",r)},d(n){n&&f(e),n&&f(l),n&&f(s),u=!1,S(_)}}}function M(o){let e;return{c(){e=m("i"),this.h()},l(l){e=d(l,"I",{class:!0}),h(e).forEach(f),this.h()},h(){p(e,"class","twa twa-fountain-pen absolute scale-150 self-center pt-[50%] text-9xl opacity-20")},m(l,s){b(l,e,s)},p:E,d(l){l&&f(e)}}}function X(o){let e,l=o[0].profileData.bio+"",s;return{c(){e=m("p"),s=T(l),this.h()},l(a){e=d(a,"P",{class:!0});var t=h(e);s=P(t,l),t.forEach(f),this.h()},h(){p(e,"class","h-full text-2xl")},m(a,t){b(a,e,t),D(e,s)},p(a,t){t&1&&l!==(l=a[0].profileData.bio+"")&&q(s,l)},d(a){a&&f(e)}}}function O(o){let e,l,s,a;return{c(){e=m("button"),l=T("Edit bio"),this.h()},l(t){e=d(t,"BUTTON",{class:!0});var i=h(e);l=P(i,"Edit bio"),i.forEach(f),this.h()},h(){p(e,"class","btn-ghost btn-sm btn w-fit self-end")},m(t,i){b(t,e,i),D(e,l),s||(a=w(e,"click",o[5]),s=!0)},p:E,d(t){t&&f(e),s=!1,a()}}}function j(o){let e;function l(t,i){return t[1]?F:C}let s=l(o),a=s(o);return{c(){a.c(),e=y()},l(t){a.l(t),e=y()},m(t,i){a.m(t,i),b(t,e,i)},p(t,[i]){s===(s=l(t))&&a?a.p(t,i):(a.d(1),a=s(t),a&&(a.c(),a.m(e.parentNode,e)))},i:E,o:E,d(t){a.d(t),t&&f(e)}}}function x(o,e,l){let{data:s}=e,a=!1,t=!1;async function i(){var k,A;if(t)return;l(2,t=!0);const{data:_,error:n,...c}=await s.supabase.from("profiles").update({bio:(k=s.profileData)==null?void 0:k.bio}).eq("id",(A=s.profileData)==null?void 0:A.id);l(2,t=!1),l(1,a=!1),n?U.warning("An error occured. Please try again later."):U.success("Bio updated.")}function r(){s.profileData.bio=this.value,l(0,s)}const u=()=>{l(1,a=!0)};return o.$$set=_=>{"data"in _&&l(0,s=_.data)},[s,a,t,i,r,u]}class J extends G{constructor(e){super(),I(this,e,x,j,R,{data:0})}}export{J as component};
