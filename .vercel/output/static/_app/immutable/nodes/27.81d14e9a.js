import{S as Qe,i as $e,s as Ye,k as T,q as J,a as R,l as N,m as S,r as Z,h as p,c as P,n as g,b as O,G as w,P as W,u as dt,O as ce,a2 as be,T as Ae,E as $,p as we,a4 as Cl,W as ge,a0 as qe,a1 as Fe,N as zl,g as te,v as Je,f as Ze,d as le,o as en,y as Ie,z as De,A as Me,B as Ce,w as Bl,K as Tt,e as Se,U as ye,a7 as hn,a6 as ut,F as _t,C as Ol,a5 as Vl}from"../chunks/index.8e69b878.js";import{g as Rl}from"../chunks/navigation.bc243d4b.js";import{e as ct}from"../chunks/emojis.b121f429.js";import{G as Pl}from"../chunks/Game.4c236b82.js";import{D as Ve,G as tl,t as Ll,C as Xt,u as Ul,v as Jn}from"../chunks/index.8d01d5d1.js";import{c as oe,d as ft,e as He,f as nl,r as Nt,g as Ee,i as Gt,h as dn,s as Yt,j as _n,k as pn,n as mn,o as gn,p as bn,m as ql,q as Zn}from"../chunks/store.55a48864.js";import{n as Te}from"../chunks/notifications.048afdce.js";import{b as Fl,m as Hl,r as Xl,a as St,d as Gl,R as Yl}from"../chunks/Rulebox.92ec5d3f.js";import{p as jl}from"../chunks/stores.986fa1bf.js";function Qn(e,t,n){var s,a;const r=e.slice();r[16]=t[n],r[21]=n;const l=r[0]+"_"+r[21];r[17]=l;const i=(s=r[2])==null?void 0:s.items.get(r[17]);r[18]=i;const o=(a=r[2])==null?void 0:a.backgrounds.get(r[17]);return r[19]=o,r}function Wl(e){let t,n;return{c(){t=T("i"),this.h()},l(r){t=N(r,"I",{class:!0}),S(t).forEach(p),this.h()},h(){g(t,"class",n="twa absolute scale-75 text-center opacity-50 twa-"+e[19])},m(r,l){O(r,t,l)},p(r,l){l&5&&n!==(n="twa absolute scale-75 text-center opacity-50 twa-"+r[19])&&g(t,"class",n)},d(r){r&&p(t)}}}function Kl(e){let t,n;return{c(){t=T("i"),this.h()},l(r){t=N(r,"I",{class:!0}),S(t).forEach(p),this.h()},h(){g(t,"class",n="twa z-10 twa-"+e[18])},m(r,l){O(r,t,l)},p(r,l){l&5&&n!==(n="twa z-10 twa-"+r[18])&&g(t,"class",n)},d(r){r&&p(t)}}}function $n(e){let t,n,r,l;function i(f,h){if(f[18])return Kl;if(f[19])return Wl}let o=i(e),s=o&&o(e);function a(){return e[10](e[21])}function u(){return e[11](e[21])}function c(){return e[12](e[21])}return{c(){t=T("button"),s&&s.c(),n=R(),this.h()},l(f){t=N(f,"BUTTON",{title:!0});var h=S(t);s&&s.l(h),n=P(h),h.forEach(p),this.h()},h(){g(t,"title","Cell #"+e[21]),we(t,"background",e[2].colors.get(e[17])||e[2].dbg)},m(f,h){O(f,t,h),s&&s.m(t,null),w(t,n),r||(l=[W(t,"mouseenter",a),W(t,"click",u),W(t,"contextmenu",Cl(c))],r=!0)},p(f,h){e=f,o===(o=i(e))&&s?s.p(e,h):(s&&s.d(1),s=o&&o(e),s&&(s.c(),s.m(t,n))),h&5&&we(t,"background",e[2].colors.get(e[17])||e[2].dbg)},d(f){f&&p(t),s&&s.d(),r=!1,Ae(l)}}}function Jl(e){let t,n,r,l,i,o,s,a={length:Ve*Ve},u=[];for(let c=0;c<a.length;c+=1)u[c]=$n(Qn(e,a,c));return{c(){t=T("div"),n=J("Section #"),r=J(e[0]),l=R(),i=T("div");for(let c=0;c<u.length;c+=1)u[c].c();this.h()},l(c){t=N(c,"DIV",{class:!0});var f=S(t);n=Z(f,"Section #"),r=Z(f,e[0]),f.forEach(p),l=P(c),i=N(c,"DIV",{class:!0});var h=S(i);for(let b=0;b<u.length;b+=1)u[b].l(h);h.forEach(p),this.h()},h(){g(t,"class","badge absolute -top-8 right-80"),g(i,"class","map")},m(c,f){O(c,t,f),w(t,n),w(t,r),O(c,l,f),O(c,i,f);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(i,null);o||(s=[W(window,"mousedown",e[8]),W(window,"mouseup",e[9])],o=!0)},p(c,[f]){if(f&1&&dt(r,c[0]),f&61){a={length:Ve*Ve};let h;for(h=0;h<a.length;h+=1){const b=Qn(c,a,h);u[h]?u[h].p(b,f):(u[h]=$n(b),u[h].c(),u[h].m(i,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=a.length}},i:ce,o:ce,d(c){c&&p(t),c&&p(l),c&&p(i),be(u,c),o=!1,Ae(s)}}}function Zl(e,t,n){let r,l,i,o;$(e,oe,y=>n(2,r=y)),$(e,ft,y=>n(13,l=y)),$(e,He,y=>n(14,i=y)),$(e,nl,y=>n(15,o=y));let{sectionIndex:s=0}=t,{copyMode:a}=t,{emojiMode:u}=t;function c(y){if(u[0]==="F"){switch(a){case"Emoji":i===""&&oe.removeEmoji(s,y);break;case"Color":l===""&&oe.deleteColorAt(s,y);break;case"Both":l===""&&oe.deleteColorAt(s,y),i===""&&oe.removeEmoji(s,y);break}i!=""&&oe.addEmoji(s,y,o),l!=""&&l!=r.dbg&&oe.updateColorAt(s,y,l)}else i===""?oe.deleteBackgroundAt(s,y):oe.updateBackgroundAt(s,y,i),l!=""&&l!=r.dbg&&oe.updateColorAt(s,y,l)}function f(y){let D=s+"_"+y,z=r.items.get(D)||"";switch(a){case"Emoji":ge(He,i=z,i),Nt.add(z);break;case"Color":ge(ft,l=r.colors.get(D)||"",l);break;case"Both":ge(He,i=z,i),ge(ft,l=r.colors.get(D)||"",l),Nt.add(z);break}}let h=!1;function b(y){h&&c(y)}const k=()=>n(1,h=!0),d=()=>n(1,h=!1),v=y=>b(y),m=y=>c(y),A=y=>f(y);return e.$$set=y=>{"sectionIndex"in y&&n(0,s=y.sectionIndex),"copyMode"in y&&n(6,a=y.copyMode),"emojiMode"in y&&n(7,u=y.emojiMode)},[s,h,r,c,f,b,a,u,k,d,v,m,A]}class Ql extends Qe{constructor(t){super(),$e(this,t,Zl,Jl,Ye,{sectionIndex:0,copyMode:6,emojiMode:7})}}var $l={value:()=>{}};function An(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Ut(n)}function Ut(e){this._=e}function ei(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",l=n.indexOf(".");if(l>=0&&(r=n.slice(l+1),n=n.slice(0,l)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Ut.prototype=An.prototype={constructor:Ut,on:function(e,t){var n=this._,r=ei(e+"",n),l,i=-1,o=r.length;if(arguments.length<2){for(;++i<o;)if((l=(e=r[i]).type)&&(l=ti(n[l],e.name)))return l;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++i<o;)if(l=(e=r[i]).type)n[l]=er(n[l],e.name,t);else if(t==null)for(l in n)n[l]=er(n[l],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Ut(e)},call:function(e,t){if((l=arguments.length-2)>0)for(var n=new Array(l),r=0,l,i;r<l;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],r=0,l=i.length;r<l;++r)i[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],l=0,i=r.length;l<i;++l)r[l].value.apply(t,n)}};function ti(e,t){for(var n=0,r=e.length,l;n<r;++n)if((l=e[n]).name===t)return l.value}function er(e,t,n){for(var r=0,l=e.length;r<l;++r)if(e[r].name===t){e[r]=$l,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var vn="http://www.w3.org/1999/xhtml";const tr={svg:"http://www.w3.org/2000/svg",xhtml:vn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),tr.hasOwnProperty(t)?{space:tr[t],local:e}:e}function ni(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===vn&&t.documentElement.namespaceURI===vn?t.createElement(e):t.createElementNS(n,e)}}function ri(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function rl(e){var t=tn(e);return(t.local?ri:ni)(t)}function li(){}function In(e){return e==null?li:function(){return this.querySelector(e)}}function ii(e){typeof e!="function"&&(e=In(e));for(var t=this._groups,n=t.length,r=new Array(n),l=0;l<n;++l)for(var i=t[l],o=i.length,s=r[l]=new Array(o),a,u,c=0;c<o;++c)(a=i[c])&&(u=e.call(a,a.__data__,c,i))&&("__data__"in a&&(u.__data__=a.__data__),s[c]=u);return new ve(r,this._parents)}function ll(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function oi(){return[]}function il(e){return e==null?oi:function(){return this.querySelectorAll(e)}}function si(e){return function(){return ll(e.apply(this,arguments))}}function ai(e){typeof e=="function"?e=si(e):e=il(e);for(var t=this._groups,n=t.length,r=[],l=[],i=0;i<n;++i)for(var o=t[i],s=o.length,a,u=0;u<s;++u)(a=o[u])&&(r.push(e.call(a,a.__data__,u,o)),l.push(a));return new ve(r,l)}function ol(e){return function(){return this.matches(e)}}function sl(e){return function(t){return t.matches(e)}}var ui=Array.prototype.find;function ci(e){return function(){return ui.call(this.children,e)}}function fi(){return this.firstElementChild}function hi(e){return this.select(e==null?fi:ci(typeof e=="function"?e:sl(e)))}var di=Array.prototype.filter;function _i(){return Array.from(this.children)}function pi(e){return function(){return di.call(this.children,e)}}function mi(e){return this.selectAll(e==null?_i:pi(typeof e=="function"?e:sl(e)))}function gi(e){typeof e!="function"&&(e=ol(e));for(var t=this._groups,n=t.length,r=new Array(n),l=0;l<n;++l)for(var i=t[l],o=i.length,s=r[l]=[],a,u=0;u<o;++u)(a=i[u])&&e.call(a,a.__data__,u,i)&&s.push(a);return new ve(r,this._parents)}function al(e){return new Array(e.length)}function bi(){return new ve(this._enter||this._groups.map(al),this._parents)}function jt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}jt.prototype={constructor:jt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function vi(e){return function(){return e}}function wi(e,t,n,r,l,i){for(var o=0,s,a=t.length,u=i.length;o<u;++o)(s=t[o])?(s.__data__=i[o],r[o]=s):n[o]=new jt(e,i[o]);for(;o<a;++o)(s=t[o])&&(l[o]=s)}function yi(e,t,n,r,l,i,o){var s,a,u=new Map,c=t.length,f=i.length,h=new Array(c),b;for(s=0;s<c;++s)(a=t[s])&&(h[s]=b=o.call(a,a.__data__,s,t)+"",u.has(b)?l[s]=a:u.set(b,a));for(s=0;s<f;++s)b=o.call(e,i[s],s,i)+"",(a=u.get(b))?(r[s]=a,a.__data__=i[s],u.delete(b)):n[s]=new jt(e,i[s]);for(s=0;s<c;++s)(a=t[s])&&u.get(h[s])===a&&(l[s]=a)}function ki(e){return e.__data__}function xi(e,t){if(!arguments.length)return Array.from(this,ki);var n=t?yi:wi,r=this._parents,l=this._groups;typeof e!="function"&&(e=vi(e));for(var i=l.length,o=new Array(i),s=new Array(i),a=new Array(i),u=0;u<i;++u){var c=r[u],f=l[u],h=f.length,b=Ei(e.call(c,c&&c.__data__,u,r)),k=b.length,d=s[u]=new Array(k),v=o[u]=new Array(k),m=a[u]=new Array(h);n(c,f,d,v,m,b,t);for(var A=0,y=0,D,z;A<k;++A)if(D=d[A]){for(A>=y&&(y=A+1);!(z=v[y])&&++y<k;);D._next=z||null}}return o=new ve(o,r),o._enter=s,o._exit=a,o}function Ei(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Si(){return new ve(this._exit||this._groups.map(al),this._parents)}function Ti(e,t,n){var r=this.enter(),l=this,i=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(l=t(l),l&&(l=l.selection())),n==null?i.remove():n(i),r&&l?r.merge(l).order():l}function Ni(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,l=n.length,i=r.length,o=Math.min(l,i),s=new Array(l),a=0;a<o;++a)for(var u=n[a],c=r[a],f=u.length,h=s[a]=new Array(f),b,k=0;k<f;++k)(b=u[k]||c[k])&&(h[k]=b);for(;a<l;++a)s[a]=n[a];return new ve(s,this._parents)}function Ai(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],l=r.length-1,i=r[l],o;--l>=0;)(o=r[l])&&(i&&o.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(o,i),i=o);return this}function Ii(e){e||(e=Di);function t(f,h){return f&&h?e(f.__data__,h.__data__):!f-!h}for(var n=this._groups,r=n.length,l=new Array(r),i=0;i<r;++i){for(var o=n[i],s=o.length,a=l[i]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(a[c]=u);a.sort(t)}return new ve(l,this._parents).order()}function Di(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Mi(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ci(){return Array.from(this)}function zi(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],l=0,i=r.length;l<i;++l){var o=r[l];if(o)return o}return null}function Bi(){let e=0;for(const t of this)++e;return e}function Oi(){return!this.node()}function Vi(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var l=t[n],i=0,o=l.length,s;i<o;++i)(s=l[i])&&e.call(s,s.__data__,i,l);return this}function Ri(e){return function(){this.removeAttribute(e)}}function Pi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Li(e,t){return function(){this.setAttribute(e,t)}}function Ui(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function qi(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Fi(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Hi(e,t){var n=tn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Pi:Ri:typeof t=="function"?n.local?Fi:qi:n.local?Ui:Li)(n,t))}function ul(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Xi(e){return function(){this.style.removeProperty(e)}}function Gi(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Yi(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ji(e,t,n){return arguments.length>1?this.each((t==null?Xi:typeof t=="function"?Yi:Gi)(e,t,n??"")):pt(this.node(),e)}function pt(e,t){return e.style.getPropertyValue(t)||ul(e).getComputedStyle(e,null).getPropertyValue(t)}function Wi(e){return function(){delete this[e]}}function Ki(e,t){return function(){this[e]=t}}function Ji(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Zi(e,t){return arguments.length>1?this.each((t==null?Wi:typeof t=="function"?Ji:Ki)(e,t)):this.node()[e]}function cl(e){return e.trim().split(/^|\s+/)}function Dn(e){return e.classList||new fl(e)}function fl(e){this._node=e,this._names=cl(e.getAttribute("class")||"")}fl.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function hl(e,t){for(var n=Dn(e),r=-1,l=t.length;++r<l;)n.add(t[r])}function dl(e,t){for(var n=Dn(e),r=-1,l=t.length;++r<l;)n.remove(t[r])}function Qi(e){return function(){hl(this,e)}}function $i(e){return function(){dl(this,e)}}function eo(e,t){return function(){(t.apply(this,arguments)?hl:dl)(this,e)}}function to(e,t){var n=cl(e+"");if(arguments.length<2){for(var r=Dn(this.node()),l=-1,i=n.length;++l<i;)if(!r.contains(n[l]))return!1;return!0}return this.each((typeof t=="function"?eo:t?Qi:$i)(n,t))}function no(){this.textContent=""}function ro(e){return function(){this.textContent=e}}function lo(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function io(e){return arguments.length?this.each(e==null?no:(typeof e=="function"?lo:ro)(e)):this.node().textContent}function oo(){this.innerHTML=""}function so(e){return function(){this.innerHTML=e}}function ao(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function uo(e){return arguments.length?this.each(e==null?oo:(typeof e=="function"?ao:so)(e)):this.node().innerHTML}function co(){this.nextSibling&&this.parentNode.appendChild(this)}function fo(){return this.each(co)}function ho(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _o(){return this.each(ho)}function po(e){var t=typeof e=="function"?e:rl(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function mo(){return null}function go(e,t){var n=typeof e=="function"?e:rl(e),r=t==null?mo:typeof t=="function"?t:In(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function bo(){var e=this.parentNode;e&&e.removeChild(this)}function vo(){return this.each(bo)}function wo(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function yo(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ko(e){return this.select(e?yo:wo)}function xo(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Eo(e){return function(t){e.call(this,t,this.__data__)}}function So(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function To(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,l=t.length,i;n<l;++n)i=t[n],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):t[++r]=i;++r?t.length=r:delete this.__on}}}function No(e,t,n){return function(){var r=this.__on,l,i=Eo(t);if(r){for(var o=0,s=r.length;o<s;++o)if((l=r[o]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=i,l.options=n),l.value=t;return}}this.addEventListener(e.type,i,n),l={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(l):this.__on=[l]}}function Ao(e,t,n){var r=So(e+""),l,i=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var a=0,u=s.length,c;a<u;++a)for(l=0,c=s[a];l<i;++l)if((o=r[l]).type===c.type&&o.name===c.name)return c.value}return}for(s=t?No:To,l=0;l<i;++l)this.each(s(r[l],t,n));return this}function _l(e,t,n){var r=ul(e),l=r.CustomEvent;typeof l=="function"?l=new l(t,n):(l=r.document.createEvent("Event"),n?(l.initEvent(t,n.bubbles,n.cancelable),l.detail=n.detail):l.initEvent(t,!1,!1)),e.dispatchEvent(l)}function Io(e,t){return function(){return _l(this,e,t)}}function Do(e,t){return function(){return _l(this,e,t.apply(this,arguments))}}function Mo(e,t){return this.each((typeof t=="function"?Do:Io)(e,t))}function*Co(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],l=0,i=r.length,o;l<i;++l)(o=r[l])&&(yield o)}var Mn=[null];function ve(e,t){this._groups=e,this._parents=t}function Ct(){return new ve([[document.documentElement]],Mn)}function zo(){return this}ve.prototype=Ct.prototype={constructor:ve,select:ii,selectAll:ai,selectChild:hi,selectChildren:mi,filter:gi,data:xi,enter:bi,exit:Si,join:Ti,merge:Ni,selection:zo,order:Ai,sort:Ii,call:Mi,nodes:Ci,node:zi,size:Bi,empty:Oi,each:Vi,attr:Hi,style:ji,property:Zi,classed:to,text:io,html:uo,raise:fo,lower:_o,append:po,insert:go,remove:vo,clone:ko,datum:xo,on:Ao,dispatch:Mo,[Symbol.iterator]:Co};function We(e){return typeof e=="string"?new ve([[document.querySelector(e)]],[document.documentElement]):new ve([[e]],Mn)}function Bo(e){let t;for(;t=e.sourceEvent;)e=t;return e}function et(e,t){if(e=Bo(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var l=t.getBoundingClientRect();return[e.clientX-l.left-t.clientLeft,e.clientY-l.top-t.clientTop]}}return[e.pageX,e.pageY]}function Oo(e){return typeof e=="string"?new ve([document.querySelectorAll(e)],[document.documentElement]):new ve([ll(e)],Mn)}const wn={capture:!0,passive:!1};function yn(e){e.preventDefault(),e.stopImmediatePropagation()}function Vo(e){var t=e.document.documentElement,n=We(e).on("dragstart.drag",yn,wn);"onselectstart"in t?n.on("selectstart.drag",yn,wn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Ro(e,t){var n=e.document.documentElement,r=We(e).on("dragstart.drag",null);t&&(r.on("click.drag",yn,wn),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function Cn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function pl(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function zt(){}var At=.7,Wt=1/At,ht="\\s*([+-]?\\d+)\\s*",It="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Re="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Po=/^#([0-9a-f]{3,8})$/,Lo=new RegExp(`^rgb\\(${ht},${ht},${ht}\\)$`),Uo=new RegExp(`^rgb\\(${Re},${Re},${Re}\\)$`),qo=new RegExp(`^rgba\\(${ht},${ht},${ht},${It}\\)$`),Fo=new RegExp(`^rgba\\(${Re},${Re},${Re},${It}\\)$`),Ho=new RegExp(`^hsl\\(${It},${Re},${Re}\\)$`),Xo=new RegExp(`^hsla\\(${It},${Re},${Re},${It}\\)$`),nr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cn(zt,Dt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rr,formatHex:rr,formatHex8:Go,formatHsl:Yo,formatRgb:lr,toString:lr});function rr(){return this.rgb().formatHex()}function Go(){return this.rgb().formatHex8()}function Yo(){return ml(this).formatHsl()}function lr(){return this.rgb().formatRgb()}function Dt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Po.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ir(t):n===3?new ke(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Vt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Vt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Lo.exec(e))?new ke(t[1],t[2],t[3],1):(t=Uo.exec(e))?new ke(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=qo.exec(e))?Vt(t[1],t[2],t[3],t[4]):(t=Fo.exec(e))?Vt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Ho.exec(e))?ar(t[1],t[2]/100,t[3]/100,1):(t=Xo.exec(e))?ar(t[1],t[2]/100,t[3]/100,t[4]):nr.hasOwnProperty(e)?ir(nr[e]):e==="transparent"?new ke(NaN,NaN,NaN,0):null}function ir(e){return new ke(e>>16&255,e>>8&255,e&255,1)}function Vt(e,t,n,r){return r<=0&&(e=t=n=NaN),new ke(e,t,n,r)}function jo(e){return e instanceof zt||(e=Dt(e)),e?(e=e.rgb(),new ke(e.r,e.g,e.b,e.opacity)):new ke}function kn(e,t,n,r){return arguments.length===1?jo(e):new ke(e,t,n,r??1)}function ke(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Cn(ke,kn,pl(zt,{brighter(e){return e=e==null?Wt:Math.pow(Wt,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new ke(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ke(nt(this.r),nt(this.g),nt(this.b),Kt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:or,formatHex:or,formatHex8:Wo,formatRgb:sr,toString:sr}));function or(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}`}function Wo(){return`#${tt(this.r)}${tt(this.g)}${tt(this.b)}${tt((isNaN(this.opacity)?1:this.opacity)*255)}`}function sr(){const e=Kt(this.opacity);return`${e===1?"rgb(":"rgba("}${nt(this.r)}, ${nt(this.g)}, ${nt(this.b)}${e===1?")":`, ${e})`}`}function Kt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function tt(e){return e=nt(e),(e<16?"0":"")+e.toString(16)}function ar(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ne(e,t,n,r)}function ml(e){if(e instanceof Ne)return new Ne(e.h,e.s,e.l,e.opacity);if(e instanceof zt||(e=Dt(e)),!e)return new Ne;if(e instanceof Ne)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,l=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-l,a=(i+l)/2;return s?(t===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-t)/s+2:o=(t-n)/s+4,s/=a<.5?i+l:2-i-l,o*=60):s=a>0&&a<1?0:o,new Ne(o,s,a,e.opacity)}function Ko(e,t,n,r){return arguments.length===1?ml(e):new Ne(e,t,n,r??1)}function Ne(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Cn(Ne,Ko,pl(zt,{brighter(e){return e=e==null?Wt:Math.pow(Wt,e),new Ne(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new Ne(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,l=2*n-r;return new ke(an(e>=240?e-240:e+120,l,r),an(e,l,r),an(e<120?e+240:e-120,l,r),this.opacity)},clamp(){return new Ne(ur(this.h),Rt(this.s),Rt(this.l),Kt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Kt(this.opacity);return`${e===1?"hsl(":"hsla("}${ur(this.h)}, ${Rt(this.s)*100}%, ${Rt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function ur(e){return e=(e||0)%360,e<0?e+360:e}function Rt(e){return Math.max(0,Math.min(1,e||0))}function an(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const gl=e=>()=>e;function Jo(e,t){return function(n){return e+n*t}}function Zo(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Qo(e){return(e=+e)==1?bl:function(t,n){return n-t?Zo(t,n,e):gl(isNaN(t)?n:t)}}function bl(e,t){var n=t-e;return n?Jo(e,n):gl(isNaN(e)?t:e)}const cr=function e(t){var n=Qo(t);function r(l,i){var o=n((l=kn(l)).r,(i=kn(i)).r),s=n(l.g,i.g),a=n(l.b,i.b),u=bl(l.opacity,i.opacity);return function(c){return l.r=o(c),l.g=s(c),l.b=a(c),l.opacity=u(c),l+""}}return r.gamma=e,r}(1);function je(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var xn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,un=new RegExp(xn.source,"g");function $o(e){return function(){return e}}function es(e){return function(t){return e(t)+""}}function ts(e,t){var n=xn.lastIndex=un.lastIndex=0,r,l,i,o=-1,s=[],a=[];for(e=e+"",t=t+"";(r=xn.exec(e))&&(l=un.exec(t));)(i=l.index)>n&&(i=t.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(l=l[0])?s[o]?s[o]+=l:s[++o]=l:(s[++o]=null,a.push({i:o,x:je(r,l)})),n=un.lastIndex;return n<t.length&&(i=t.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?a[0]?es(a[0].x):$o(t):(t=a.length,function(u){for(var c=0,f;c<t;++c)s[(f=a[c]).i]=f.x(u);return s.join("")})}var fr=180/Math.PI,En={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function vl(e,t,n,r,l,i){var o,s,a;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(a=e*n+t*r)&&(n-=e*a,r-=t*a),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,a/=s),e*r<t*n&&(e=-e,t=-t,a=-a,o=-o),{translateX:l,translateY:i,rotate:Math.atan2(t,e)*fr,skewX:Math.atan(a)*fr,scaleX:o,scaleY:s}}var Pt;function ns(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?En:vl(t.a,t.b,t.c,t.d,t.e,t.f)}function rs(e){return e==null||(Pt||(Pt=document.createElementNS("http://www.w3.org/2000/svg","g")),Pt.setAttribute("transform",e),!(e=Pt.transform.baseVal.consolidate()))?En:(e=e.matrix,vl(e.a,e.b,e.c,e.d,e.e,e.f))}function wl(e,t,n,r){function l(u){return u.length?u.pop()+" ":""}function i(u,c,f,h,b,k){if(u!==f||c!==h){var d=b.push("translate(",null,t,null,n);k.push({i:d-4,x:je(u,f)},{i:d-2,x:je(c,h)})}else(f||h)&&b.push("translate("+f+t+h+n)}function o(u,c,f,h){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),h.push({i:f.push(l(f)+"rotate(",null,r)-2,x:je(u,c)})):c&&f.push(l(f)+"rotate("+c+r)}function s(u,c,f,h){u!==c?h.push({i:f.push(l(f)+"skewX(",null,r)-2,x:je(u,c)}):c&&f.push(l(f)+"skewX("+c+r)}function a(u,c,f,h,b,k){if(u!==f||c!==h){var d=b.push(l(b)+"scale(",null,",",null,")");k.push({i:d-4,x:je(u,f)},{i:d-2,x:je(c,h)})}else(f!==1||h!==1)&&b.push(l(b)+"scale("+f+","+h+")")}return function(u,c){var f=[],h=[];return u=e(u),c=e(c),i(u.translateX,u.translateY,c.translateX,c.translateY,f,h),o(u.rotate,c.rotate,f,h),s(u.skewX,c.skewX,f,h),a(u.scaleX,u.scaleY,c.scaleX,c.scaleY,f,h),u=c=null,function(b){for(var k=-1,d=h.length,v;++k<d;)f[(v=h[k]).i]=v.x(b);return f.join("")}}}var ls=wl(ns,"px, ","px)","deg)"),is=wl(rs,", ",")",")"),os=1e-12;function hr(e){return((e=Math.exp(e))+1/e)/2}function ss(e){return((e=Math.exp(e))-1/e)/2}function as(e){return((e=Math.exp(2*e))-1)/(e+1)}const us=function e(t,n,r){function l(i,o){var s=i[0],a=i[1],u=i[2],c=o[0],f=o[1],h=o[2],b=c-s,k=f-a,d=b*b+k*k,v,m;if(d<os)m=Math.log(h/u)/t,v=function(X){return[s+X*b,a+X*k,u*Math.exp(t*X*m)]};else{var A=Math.sqrt(d),y=(h*h-u*u+r*d)/(2*u*n*A),D=(h*h-u*u-r*d)/(2*h*n*A),z=Math.log(Math.sqrt(y*y+1)-y),U=Math.log(Math.sqrt(D*D+1)-D);m=(U-z)/t,v=function(X){var ee=X*m,G=hr(z),q=u/(n*A)*(G*as(t*ee+z)-ss(z));return[s+q*b,a+q*k,u*G/hr(t*ee+z)]}}return v.duration=m*1e3*t/Math.SQRT2,v}return l.rho=function(i){var o=Math.max(.001,+i),s=o*o,a=s*s;return e(o,s,a)},l}(Math.SQRT2,2,4);var mt=0,xt=0,yt=0,yl=1e3,Jt,Et,Zt=0,rt=0,nn=0,Mt=typeof performance=="object"&&performance.now?performance:Date,kl=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zn(){return rt||(kl(cs),rt=Mt.now()+nn)}function cs(){rt=0}function Qt(){this._call=this._time=this._next=null}Qt.prototype=xl.prototype={constructor:Qt,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?zn():+n)+(t==null?0:+t),!this._next&&Et!==this&&(Et?Et._next=this:Jt=this,Et=this),this._call=e,this._time=n,Sn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Sn())}};function xl(e,t,n){var r=new Qt;return r.restart(e,t,n),r}function fs(){zn(),++mt;for(var e=Jt,t;e;)(t=rt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--mt}function dr(){rt=(Zt=Mt.now())+nn,mt=xt=0;try{fs()}finally{mt=0,ds(),rt=0}}function hs(){var e=Mt.now(),t=e-Zt;t>yl&&(nn-=t,Zt=e)}function ds(){for(var e,t=Jt,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Jt=n);Et=e,Sn(r)}function Sn(e){if(!mt){xt&&(xt=clearTimeout(xt));var t=e-rt;t>24?(e<1/0&&(xt=setTimeout(dr,e-Mt.now()-nn)),yt&&(yt=clearInterval(yt))):(yt||(Zt=Mt.now(),yt=setInterval(hs,yl)),mt=1,kl(dr))}}function _r(e,t,n){var r=new Qt;return t=t==null?0:+t,r.restart(l=>{r.stop(),e(l+t)},t,n),r}var _s=An("start","end","cancel","interrupt"),ps=[],El=0,pr=1,Tn=2,qt=3,mr=4,Nn=5,Ft=6;function rn(e,t,n,r,l,i){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;ms(e,n,{name:t,index:r,group:l,on:_s,tween:ps,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:El})}function Bn(e,t){var n=ze(e,t);if(n.state>El)throw new Error("too late; already scheduled");return n}function Pe(e,t){var n=ze(e,t);if(n.state>qt)throw new Error("too late; already running");return n}function ze(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function ms(e,t,n){var r=e.__transition,l;r[t]=n,n.timer=xl(i,0,n.time);function i(u){n.state=pr,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,f,h,b;if(n.state!==pr)return a();for(c in r)if(b=r[c],b.name===n.name){if(b.state===qt)return _r(o);b.state===mr?(b.state=Ft,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete r[c]):+c<t&&(b.state=Ft,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete r[c])}if(_r(function(){n.state===qt&&(n.state=mr,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Tn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Tn){for(n.state=qt,l=new Array(h=n.tween.length),c=0,f=-1;c<h;++c)(b=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(l[++f]=b);l.length=f+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(a),n.state=Nn,1),f=-1,h=l.length;++f<h;)l[f].call(e,c);n.state===Nn&&(n.on.call("end",e,e.__data__,n.index,n.group),a())}function a(){n.state=Ft,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function Ht(e,t){var n=e.__transition,r,l,i=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){i=!1;continue}l=r.state>Tn&&r.state<Nn,r.state=Ft,r.timer.stop(),r.on.call(l?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}i&&delete e.__transition}}function gs(e){return this.each(function(){Ht(this,e)})}function bs(e,t){var n,r;return function(){var l=Pe(this,e),i=l.tween;if(i!==n){r=n=i;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}l.tween=r}}function vs(e,t,n){var r,l;if(typeof n!="function")throw new Error;return function(){var i=Pe(this,e),o=i.tween;if(o!==r){l=(r=o).slice();for(var s={name:t,value:n},a=0,u=l.length;a<u;++a)if(l[a].name===t){l[a]=s;break}a===u&&l.push(s)}i.tween=l}}function ws(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=ze(this.node(),n).tween,l=0,i=r.length,o;l<i;++l)if((o=r[l]).name===e)return o.value;return null}return this.each((t==null?bs:vs)(n,e,t))}function On(e,t,n){var r=e._id;return e.each(function(){var l=Pe(this,r);(l.value||(l.value={}))[t]=n.apply(this,arguments)}),function(l){return ze(l,r).value[t]}}function Sl(e,t){var n;return(typeof t=="number"?je:t instanceof Dt?cr:(n=Dt(t))?(t=n,cr):ts)(e,t)}function ys(e){return function(){this.removeAttribute(e)}}function ks(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xs(e,t,n){var r,l=n+"",i;return function(){var o=this.getAttribute(e);return o===l?null:o===r?i:i=t(r=o,n)}}function Es(e,t,n){var r,l=n+"",i;return function(){var o=this.getAttributeNS(e.space,e.local);return o===l?null:o===r?i:i=t(r=o,n)}}function Ss(e,t,n){var r,l,i;return function(){var o,s=n(this),a;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),a=s+"",o===a?null:o===r&&a===l?i:(l=a,i=t(r=o,s)))}}function Ts(e,t,n){var r,l,i;return function(){var o,s=n(this),a;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),a=s+"",o===a?null:o===r&&a===l?i:(l=a,i=t(r=o,s)))}}function Ns(e,t){var n=tn(e),r=n==="transform"?is:Sl;return this.attrTween(e,typeof t=="function"?(n.local?Ts:Ss)(n,r,On(this,"attr."+e,t)):t==null?(n.local?ks:ys)(n):(n.local?Es:xs)(n,r,t))}function As(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Is(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Ds(e,t){var n,r;function l(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&Is(e,i)),n}return l._value=t,l}function Ms(e,t){var n,r;function l(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&As(e,i)),n}return l._value=t,l}function Cs(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=tn(e);return this.tween(n,(r.local?Ds:Ms)(r,t))}function zs(e,t){return function(){Bn(this,e).delay=+t.apply(this,arguments)}}function Bs(e,t){return t=+t,function(){Bn(this,e).delay=t}}function Os(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?zs:Bs)(t,e)):ze(this.node(),t).delay}function Vs(e,t){return function(){Pe(this,e).duration=+t.apply(this,arguments)}}function Rs(e,t){return t=+t,function(){Pe(this,e).duration=t}}function Ps(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Vs:Rs)(t,e)):ze(this.node(),t).duration}function Ls(e,t){if(typeof t!="function")throw new Error;return function(){Pe(this,e).ease=t}}function Us(e){var t=this._id;return arguments.length?this.each(Ls(t,e)):ze(this.node(),t).ease}function qs(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Pe(this,e).ease=n}}function Fs(e){if(typeof e!="function")throw new Error;return this.each(qs(this._id,e))}function Hs(e){typeof e!="function"&&(e=ol(e));for(var t=this._groups,n=t.length,r=new Array(n),l=0;l<n;++l)for(var i=t[l],o=i.length,s=r[l]=[],a,u=0;u<o;++u)(a=i[u])&&e.call(a,a.__data__,u,i)&&s.push(a);return new Ge(r,this._parents,this._name,this._id)}function Xs(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,l=n.length,i=Math.min(r,l),o=new Array(r),s=0;s<i;++s)for(var a=t[s],u=n[s],c=a.length,f=o[s]=new Array(c),h,b=0;b<c;++b)(h=a[b]||u[b])&&(f[b]=h);for(;s<r;++s)o[s]=t[s];return new Ge(o,this._parents,this._name,this._id)}function Gs(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Ys(e,t,n){var r,l,i=Gs(t)?Bn:Pe;return function(){var o=i(this,e),s=o.on;s!==r&&(l=(r=s).copy()).on(t,n),o.on=l}}function js(e,t){var n=this._id;return arguments.length<2?ze(this.node(),n).on.on(e):this.each(Ys(n,e,t))}function Ws(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ks(){return this.on("end.remove",Ws(this._id))}function Js(e){var t=this._name,n=this._id;typeof e!="function"&&(e=In(e));for(var r=this._groups,l=r.length,i=new Array(l),o=0;o<l;++o)for(var s=r[o],a=s.length,u=i[o]=new Array(a),c,f,h=0;h<a;++h)(c=s[h])&&(f=e.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,rn(u[h],t,n,h,u,ze(c,n)));return new Ge(i,this._parents,t,n)}function Zs(e){var t=this._name,n=this._id;typeof e!="function"&&(e=il(e));for(var r=this._groups,l=r.length,i=[],o=[],s=0;s<l;++s)for(var a=r[s],u=a.length,c,f=0;f<u;++f)if(c=a[f]){for(var h=e.call(c,c.__data__,f,a),b,k=ze(c,n),d=0,v=h.length;d<v;++d)(b=h[d])&&rn(b,t,n,d,h,k);i.push(h),o.push(c)}return new Ge(i,o,t,n)}var Qs=Ct.prototype.constructor;function $s(){return new Qs(this._groups,this._parents)}function ea(e,t){var n,r,l;return function(){var i=pt(this,e),o=(this.style.removeProperty(e),pt(this,e));return i===o?null:i===n&&o===r?l:l=t(n=i,r=o)}}function Tl(e){return function(){this.style.removeProperty(e)}}function ta(e,t,n){var r,l=n+"",i;return function(){var o=pt(this,e);return o===l?null:o===r?i:i=t(r=o,n)}}function na(e,t,n){var r,l,i;return function(){var o=pt(this,e),s=n(this),a=s+"";return s==null&&(a=s=(this.style.removeProperty(e),pt(this,e))),o===a?null:o===r&&a===l?i:(l=a,i=t(r=o,s))}}function ra(e,t){var n,r,l,i="style."+t,o="end."+i,s;return function(){var a=Pe(this,e),u=a.on,c=a.value[i]==null?s||(s=Tl(t)):void 0;(u!==n||l!==c)&&(r=(n=u).copy()).on(o,l=c),a.on=r}}function la(e,t,n){var r=(e+="")=="transform"?ls:Sl;return t==null?this.styleTween(e,ea(e,r)).on("end.style."+e,Tl(e)):typeof t=="function"?this.styleTween(e,na(e,r,On(this,"style."+e,t))).each(ra(this._id,e)):this.styleTween(e,ta(e,r,t),n).on("end.style."+e,null)}function ia(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function oa(e,t,n){var r,l;function i(){var o=t.apply(this,arguments);return o!==l&&(r=(l=o)&&ia(e,o,n)),r}return i._value=t,i}function sa(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,oa(e,t,n??""))}function aa(e){return function(){this.textContent=e}}function ua(e){return function(){var t=e(this);this.textContent=t??""}}function ca(e){return this.tween("text",typeof e=="function"?ua(On(this,"text",e)):aa(e==null?"":e+""))}function fa(e){return function(t){this.textContent=e.call(this,t)}}function ha(e){var t,n;function r(){var l=e.apply(this,arguments);return l!==n&&(t=(n=l)&&fa(l)),t}return r._value=e,r}function da(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,ha(e))}function _a(){for(var e=this._name,t=this._id,n=Nl(),r=this._groups,l=r.length,i=0;i<l;++i)for(var o=r[i],s=o.length,a,u=0;u<s;++u)if(a=o[u]){var c=ze(a,t);rn(a,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ge(r,this._parents,e,n)}function pa(){var e,t,n=this,r=n._id,l=n.size();return new Promise(function(i,o){var s={value:o},a={value:function(){--l===0&&i()}};n.each(function(){var u=Pe(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(a)),u.on=t}),l===0&&i()})}var ma=0;function Ge(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Nl(){return++ma}var Ue=Ct.prototype;Ge.prototype={constructor:Ge,select:Js,selectAll:Zs,selectChild:Ue.selectChild,selectChildren:Ue.selectChildren,filter:Hs,merge:Xs,selection:$s,transition:_a,call:Ue.call,nodes:Ue.nodes,node:Ue.node,size:Ue.size,empty:Ue.empty,each:Ue.each,on:js,attr:Ns,attrTween:Cs,style:la,styleTween:sa,text:ca,textTween:da,remove:Ks,tween:ws,delay:Os,duration:Ps,ease:Us,easeVarying:Fs,end:pa,[Symbol.iterator]:Ue[Symbol.iterator]};function ga(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var ba={time:null,delay:0,duration:250,ease:ga};function va(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function wa(e){var t,n;e instanceof Ge?(t=e._id,e=e._name):(t=Nl(),(n=ba).time=zn(),e=e==null?null:e+"");for(var r=this._groups,l=r.length,i=0;i<l;++i)for(var o=r[i],s=o.length,a,u=0;u<s;++u)(a=o[u])&&rn(a,e,t,u,o,n||va(a,t));return new Ge(r,this._parents,e,t)}Ct.prototype.interrupt=gs;Ct.prototype.transition=wa;const Lt=e=>()=>e;function ya(e,{sourceEvent:t,target:n,transform:r,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:l}})}function Xe(e,t,n){this.k=e,this.x=t,this.y=n}Xe.prototype={constructor:Xe,scale:function(e){return e===1?this:new Xe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Xe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Vn=new Xe(1,0,0);Al.prototype=Xe.prototype;function Al(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Vn;return e.__zoom}function cn(e){e.stopImmediatePropagation()}function kt(e){e.preventDefault(),e.stopImmediatePropagation()}function ka(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function xa(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function gr(){return this.__zoom||Vn}function Ea(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Sa(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ta(e,t,n){var r=e.invertX(t[0][0])-n[0][0],l=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(l>r?(r+l)/2:Math.min(0,r)||Math.max(0,l),o>i?(i+o)/2:Math.min(0,i)||Math.max(0,o))}function Na(){var e=ka,t=xa,n=Ta,r=Ea,l=Sa,i=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,a=us,u=An("start","zoom","end"),c,f,h,b=500,k=150,d=0,v=10;function m(_){_.property("__zoom",gr).on("wheel.zoom",ee,{passive:!1}).on("mousedown.zoom",G).on("dblclick.zoom",q).filter(l).on("touchstart.zoom",K).on("touchmove.zoom",Y).on("touchend.zoom touchcancel.zoom",Q).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(_,I,x,E){var C=_.selection?_.selection():_;C.property("__zoom",gr),_!==C?z(_,I,x,E):C.interrupt().each(function(){U(this,arguments).event(E).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},m.scaleBy=function(_,I,x,E){m.scaleTo(_,function(){var C=this.__zoom.k,V=typeof I=="function"?I.apply(this,arguments):I;return C*V},x,E)},m.scaleTo=function(_,I,x,E){m.transform(_,function(){var C=t.apply(this,arguments),V=this.__zoom,H=x==null?D(C):typeof x=="function"?x.apply(this,arguments):x,M=V.invert(H),j=typeof I=="function"?I.apply(this,arguments):I;return n(y(A(V,j),H,M),C,o)},x,E)},m.translateBy=function(_,I,x,E){m.transform(_,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof x=="function"?x.apply(this,arguments):x),t.apply(this,arguments),o)},null,E)},m.translateTo=function(_,I,x,E,C){m.transform(_,function(){var V=t.apply(this,arguments),H=this.__zoom,M=E==null?D(V):typeof E=="function"?E.apply(this,arguments):E;return n(Vn.translate(M[0],M[1]).scale(H.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof x=="function"?-x.apply(this,arguments):-x),V,o)},E,C)};function A(_,I){return I=Math.max(i[0],Math.min(i[1],I)),I===_.k?_:new Xe(I,_.x,_.y)}function y(_,I,x){var E=I[0]-x[0]*_.k,C=I[1]-x[1]*_.k;return E===_.x&&C===_.y?_:new Xe(_.k,E,C)}function D(_){return[(+_[0][0]+ +_[1][0])/2,(+_[0][1]+ +_[1][1])/2]}function z(_,I,x,E){_.on("start.zoom",function(){U(this,arguments).event(E).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(E).end()}).tween("zoom",function(){var C=this,V=arguments,H=U(C,V).event(E),M=t.apply(C,V),j=x==null?D(M):typeof x=="function"?x.apply(C,V):x,ae=Math.max(M[1][0]-M[0][0],M[1][1]-M[0][1]),ne=C.__zoom,re=typeof I=="function"?I.apply(C,V):I,pe=a(ne.invert(j).concat(ae/ne.k),re.invert(j).concat(ae/re.k));return function(fe){if(fe===1)fe=re;else{var ue=pe(fe),xe=ae/ue[2];fe=new Xe(xe,j[0]-ue[0]*xe,j[1]-ue[1]*xe)}H.zoom(null,fe)}})}function U(_,I,x){return!x&&_.__zooming||new X(_,I)}function X(_,I){this.that=_,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(_,I),this.taps=0}X.prototype={event:function(_){return _&&(this.sourceEvent=_),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(_,I){return this.mouse&&_!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&_!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&_!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(_){var I=We(this.that).datum();u.call(_,this.that,new ya(_,{sourceEvent:this.sourceEvent,target:m,type:_,transform:this.that.__zoom,dispatch:u}),I)}};function ee(_,...I){if(!e.apply(this,arguments))return;var x=U(this,I).event(_),E=this.__zoom,C=Math.max(i[0],Math.min(i[1],E.k*Math.pow(2,r.apply(this,arguments)))),V=et(_);if(x.wheel)(x.mouse[0][0]!==V[0]||x.mouse[0][1]!==V[1])&&(x.mouse[1]=E.invert(x.mouse[0]=V)),clearTimeout(x.wheel);else{if(E.k===C)return;x.mouse=[V,E.invert(V)],Ht(this),x.start()}kt(_),x.wheel=setTimeout(H,k),x.zoom("mouse",n(y(A(E,C),x.mouse[0],x.mouse[1]),x.extent,o));function H(){x.wheel=null,x.end()}}function G(_,...I){if(h||!e.apply(this,arguments))return;var x=_.currentTarget,E=U(this,I,!0).event(_),C=We(_.view).on("mousemove.zoom",j,!0).on("mouseup.zoom",ae,!0),V=et(_,x),H=_.clientX,M=_.clientY;Vo(_.view),cn(_),E.mouse=[V,this.__zoom.invert(V)],Ht(this),E.start();function j(ne){if(kt(ne),!E.moved){var re=ne.clientX-H,pe=ne.clientY-M;E.moved=re*re+pe*pe>d}E.event(ne).zoom("mouse",n(y(E.that.__zoom,E.mouse[0]=et(ne,x),E.mouse[1]),E.extent,o))}function ae(ne){C.on("mousemove.zoom mouseup.zoom",null),Ro(ne.view,E.moved),kt(ne),E.event(ne).end()}}function q(_,...I){if(e.apply(this,arguments)){var x=this.__zoom,E=et(_.changedTouches?_.changedTouches[0]:_,this),C=x.invert(E),V=x.k*(_.shiftKey?.5:2),H=n(y(A(x,V),E,C),t.apply(this,I),o);kt(_),s>0?We(this).transition().duration(s).call(z,H,E,_):We(this).call(m.transform,H,E,_)}}function K(_,...I){if(e.apply(this,arguments)){var x=_.touches,E=x.length,C=U(this,I,_.changedTouches.length===E).event(_),V,H,M,j;for(cn(_),H=0;H<E;++H)M=x[H],j=et(M,this),j=[j,this.__zoom.invert(j),M.identifier],C.touch0?!C.touch1&&C.touch0[2]!==j[2]&&(C.touch1=j,C.taps=0):(C.touch0=j,V=!0,C.taps=1+!!c);c&&(c=clearTimeout(c)),V&&(C.taps<2&&(f=j[0],c=setTimeout(function(){c=null},b)),Ht(this),C.start())}}function Y(_,...I){if(this.__zooming){var x=U(this,I).event(_),E=_.changedTouches,C=E.length,V,H,M,j;for(kt(_),V=0;V<C;++V)H=E[V],M=et(H,this),x.touch0&&x.touch0[2]===H.identifier?x.touch0[0]=M:x.touch1&&x.touch1[2]===H.identifier&&(x.touch1[0]=M);if(H=x.that.__zoom,x.touch1){var ae=x.touch0[0],ne=x.touch0[1],re=x.touch1[0],pe=x.touch1[1],fe=(fe=re[0]-ae[0])*fe+(fe=re[1]-ae[1])*fe,ue=(ue=pe[0]-ne[0])*ue+(ue=pe[1]-ne[1])*ue;H=A(H,Math.sqrt(fe/ue)),M=[(ae[0]+re[0])/2,(ae[1]+re[1])/2],j=[(ne[0]+pe[0])/2,(ne[1]+pe[1])/2]}else if(x.touch0)M=x.touch0[0],j=x.touch0[1];else return;x.zoom("touch",n(y(H,M,j),x.extent,o))}}function Q(_,...I){if(this.__zooming){var x=U(this,I).event(_),E=_.changedTouches,C=E.length,V,H;for(cn(_),h&&clearTimeout(h),h=setTimeout(function(){h=null},b),V=0;V<C;++V)H=E[V],x.touch0&&x.touch0[2]===H.identifier?delete x.touch0:x.touch1&&x.touch1[2]===H.identifier&&delete x.touch1;if(x.touch1&&!x.touch0&&(x.touch0=x.touch1,delete x.touch1),x.touch0)x.touch0[1]=this.__zoom.invert(x.touch0[0]);else if(x.end(),x.taps===2&&(H=et(H,this),Math.hypot(f[0]-H[0],f[1]-H[1])<v)){var M=We(this).on("dblclick.zoom");M&&M.apply(this,arguments)}}}return m.wheelDelta=function(_){return arguments.length?(r=typeof _=="function"?_:Lt(+_),m):r},m.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Lt(!!_),m):e},m.touchable=function(_){return arguments.length?(l=typeof _=="function"?_:Lt(!!_),m):l},m.extent=function(_){return arguments.length?(t=typeof _=="function"?_:Lt([[+_[0][0],+_[0][1]],[+_[1][0],+_[1][1]]]),m):t},m.scaleExtent=function(_){return arguments.length?(i[0]=+_[0],i[1]=+_[1],m):[i[0],i[1]]},m.translateExtent=function(_){return arguments.length?(o[0][0]=+_[0][0],o[1][0]=+_[1][0],o[0][1]=+_[0][1],o[1][1]=+_[1][1],m):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},m.constrain=function(_){return arguments.length?(n=_,m):n},m.duration=function(_){return arguments.length?(s=+_,m):s},m.interpolate=function(_){return arguments.length?(a=_,m):a},m.on=function(){var _=u.on.apply(u,arguments);return _===u?m:_},m.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,m):Math.sqrt(d)},m.tapDistance=function(_){return arguments.length?(v=+_,m):v},m}function br(e,t,n){const r=e.slice();return r[11]=t[n],r}function vr(e){let t,n;return t=new Yl({props:{rbx:e[11]}}),{c(){Ie(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,l){Me(t,r,l),n=!0},p(r,l){const i={};l&8&&(i.rbx=r[11]),t.$set(i)},i(r){n||(te(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function wr(e){let t;return{c(){t=qe("rect"),this.h()},l(n){t=Fe(n,"rect",{width:!0,height:!0,style:!0}),S(t).forEach(p),this.h()},h(){g(t,"width","100%"),g(t,"height","100%"),we(t,"fill","url(#background)")},m(n,r){O(n,t,r)},d(n){n&&p(t)}}}function Aa(e){let t,n,r,l,i,o,s,a,u,c,f,h=e[3],b=[];for(let v=0;v<h.length;v+=1)b[v]=vr(br(e,h,v));const k=v=>le(b[v],1,1,()=>{b[v]=null});let d=e[2]&&wr();return{c(){t=T("div"),n=T("div");for(let v=0;v<b.length;v+=1)b[v].c();r=R(),l=qe("svg"),i=qe("defs"),o=qe("pattern"),s=qe("circle"),d&&d.c(),this.h()},l(v){t=N(v,"DIV",{class:!0});var m=S(t);n=N(m,"DIV",{class:!0});var A=S(n);for(let U=0;U<b.length;U+=1)b[U].l(A);A.forEach(p),m.forEach(p),r=P(v),l=Fe(v,"svg",{class:!0,viewBox:!0});var y=S(l);i=Fe(y,"defs",{});var D=S(i);o=Fe(D,"pattern",{id:!0,x:!0,y:!0,width:!0,height:!0,patternUnits:!0});var z=S(o);s=Fe(z,"circle",{id:!0,cx:!0,cy:!0,r:!0,style:!0}),S(s).forEach(p),z.forEach(p),D.forEach(p),d&&d.l(y),y.forEach(p),this.h()},h(){g(n,"class","Rbx svelte-174cpmb"),g(t,"class","Ruleboxes cursor-grab svelte-174cpmb"),g(s,"id","dot"),g(s,"cx",Ke/2-$t/2),g(s,"cy",Ke/2-$t/2),g(s,"r","0.5"),we(s,"fill","gray"),g(o,"id","background"),g(o,"x","0"),g(o,"y","0"),g(o,"width",Ke),g(o,"height",Ke),g(o,"patternUnits","userSpaceOnUse"),g(l,"class",zl("Edges")+" svelte-174cpmb"),g(l,"viewBox",a="0 0 "+e[0]+" "+e[0])},m(v,m){O(v,t,m),w(t,n);for(let A=0;A<b.length;A+=1)b[A]&&b[A].m(n,null);e[5](t),O(v,r,m),O(v,l,m),w(l,i),w(i,o),w(o,s),d&&d.m(l,null),u=!0,c||(f=W(t,"click",e[4]),c=!0)},p(v,[m]){if(m&8){h=v[3];let A;for(A=0;A<h.length;A+=1){const y=br(v,h,A);b[A]?(b[A].p(y,m),te(b[A],1)):(b[A]=vr(y),b[A].c(),te(b[A],1),b[A].m(n,null))}for(Je(),A=h.length;A<b.length;A+=1)k(A);Ze()}v[2]?d||(d=wr(),d.c(),d.m(l,null)):d&&(d.d(1),d=null),(!u||m&1&&a!==(a="0 0 "+v[0]+" "+v[0]))&&g(l,"viewBox",a)},i(v){if(!u){for(let m=0;m<h.length;m+=1)te(b[m]);u=!0}},o(v){b=b.filter(Boolean);for(let m=0;m<b.length;m+=1)le(b[m]);u=!1},d(v){v&&p(t),be(b,v),e[5](null),v&&p(r),v&&p(l),d&&d.d(),c=!1,f()}}}const Ke=15,$t=10;function Ia(e,t,n){let r,l,i,o;$(e,Fl,k=>n(2,r=k)),$(e,Hl,k=>n(6,l=k)),$(e,Xl,k=>n(7,i=k)),$(e,St,k=>n(3,o=k));let{graphSize:s=tl}=t,a={zoom:Na,zoomTransform:Al,select:We,selectAll:Oo},u;en(()=>{a.select(".Ruleboxes").call(c).on("dblclick.zoom",null),a.select(".Ruleboxes").on("contextmenu",function(k){k.preventDefault();let{x:d,y:v,k:m}=a.zoomTransform(u);v=(-v+k.layerY)/m,d=(-d+k.layerX)/m,St.spawn("ctxMenu",{x:d,y:v})})});let c=a.zoom().filter(()=>!i).scaleExtent([.4,2]).on("zoom",f);function f(k){if(!l)return;Gl.set(k.transform.k),r&&a.select("#background").attr("x",k.transform.x).attr("y",k.transform.y).attr("width",Ke*k.transform.k).attr("height",Ke*k.transform.k).selectAll("#dot").attr("x",Ke*k.transform.k/2-$t/2).attr("y",Ke*k.transform.k/2-$t/2).attr("opacity",Math.min(k.transform.k,1)),a.select(".Edges g").attr("transform",k.transform);let d=a.zoomTransform(this);a.select(".Rbx").style("transform","translate("+d.x+"px,"+d.y+"px) scale("+d.k+")").style("transform-origin","0 0")}function h(){St.removeCtxMenu()}function b(k){Bl[k?"unshift":"push"](()=>{u=k,n(1,u)})}return e.$$set=k=>{"graphSize"in k&&n(0,s=k.graphSize)},[s,u,r,o,h,b]}class Da extends Qe{constructor(t){super(),$e(this,t,Ia,Aa,Ye,{graphSize:0})}}function Ma(e){let t,n,r,l,i,o,s,a,u,c,f,h;return Tt(e[3]),n=new Da({props:{graphSize:e[0]}}),{c(){t=T("div"),Ie(n.$$.fragment),r=R(),l=T("p"),i=J("Right click to spawn a Rulebox"),o=R(),s=T("p"),a=J("Press R to unstuck"),this.h()},l(b){t=N(b,"DIV",{class:!0,style:!0});var k=S(t);De(n.$$.fragment,k),r=P(k),l=N(k,"P",{class:!0});var d=S(l);i=Z(d,"Right click to spawn a Rulebox"),d.forEach(p),o=P(k),s=N(k,"P",{class:!0});var v=S(s);a=Z(v,"Press R to unstuck"),v.forEach(p),k.forEach(p),this.h()},h(){g(l,"class","absolute bottom-0 right-0 pr-1 text-xs"),g(s,"class","absolute bottom-0 left-0 pl-1 text-xs"),g(t,"class","Svelvet shadow-xl svelte-1eknqzl"),g(t,"style",u=`width: ${e[0]}px; height: ${e[0]}px`)},m(b,k){O(b,t,k),Me(n,t,null),w(t,r),w(t,l),w(l,i),w(t,o),w(t,s),w(s,a),c=!0,f||(h=[W(window,"resize",e[2]),W(window,"resize",e[3])],f=!0)},p(b,[k]){const d={};k&1&&(d.graphSize=b[0]),n.$set(d),(!c||k&1&&u!==(u=`width: ${b[0]}px; height: ${b[0]}px`))&&g(t,"style",u)},i(b){c||(te(n.$$.fragment,b),c=!0)},o(b){le(n.$$.fragment,b),c=!1},d(b){b&&p(t),Ce(n),f=!1,Ae(h)}}}function Ca(e,t,n){let r,l;function i(){l>=1536?n(0,r=tl):n(0,r=Ll)}en(i);function o(){n(1,l=window.innerWidth)}return[r,l,i,o]}class za extends Qe{constructor(t){super(),$e(this,t,Ca,Ma,Ye,{})}}function yr(e,t,n){const r=e.slice();r[28]=t[n],r[30]=t,r[31]=n;const l=typeof r[28]=="string";return r[29]=l,r}function kr(e,t,n){const r=e.slice();r[32]=t[n],r[34]=t,r[31]=n;const l=r[32].next===r[1];return r[33]=l,r}function fn(e){const t=e.slice(),n=t[3].get(t[0]);return t[27]=n,t}function xr(e){let t,n,r,l,i,o,s,a,u,c,f,h,b=e[27],k=[];for(let d=0;d<b.length;d+=1)k[d]=Tr(yr(e,b,d));return{c(){t=T("div"),n=T("div"),r=T("input"),l=R(),i=T("button"),o=J("ADD AS TEXT"),s=R(),a=T("button"),u=J("ADD AS CHOICE"),c=R();for(let d=0;d<k.length;d+=1)k[d].c();this.h()},l(d){t=N(d,"DIV",{class:!0});var v=S(t);n=N(v,"DIV",{class:!0});var m=S(n);r=N(m,"INPUT",{class:!0}),l=P(m),i=N(m,"BUTTON",{class:!0});var A=S(i);o=Z(A,"ADD AS TEXT"),A.forEach(p),s=P(m),a=N(m,"BUTTON",{class:!0});var y=S(a);u=Z(y,"ADD AS CHOICE"),y.forEach(p),m.forEach(p),c=P(v);for(let D=0;D<k.length;D+=1)k[D].l(v);v.forEach(p),this.h()},h(){g(r,"class","input-bordered input w-full"),g(i,"class","btn"),a.disabled=e[10],g(a,"class","btn"),g(n,"class","mb-4 flex flex-row gap-2"),g(t,"class","mb-2 h-full w-full rounded border-2 border-black p-4")},m(d,v){O(d,t,v),w(t,n),w(n,r),ye(r,e[4]),w(n,l),w(n,i),w(i,o),w(n,s),w(n,a),w(a,u),w(t,c);for(let m=0;m<k.length;m+=1)k[m]&&k[m].m(t,null);f||(h=[W(r,"input",e[16]),W(i,"click",e[13]),W(a,"click",e[12])],f=!0)},p(d,v){if(v[0]&16&&r.value!==d[4]&&ye(r,d[4]),v[0]&1024&&(a.disabled=d[10]),v[0]&19435){b=d[27];let m;for(m=0;m<b.length;m+=1){const A=yr(d,b,m);k[m]?k[m].p(A,v):(k[m]=Tr(A),k[m].c(),k[m].m(t,null))}for(;m<k.length;m+=1)k[m].d(1);k.length=b.length}},d(d){d&&p(t),be(k,d),f=!1,Ae(h)}}}function Ba(e){let t,n,r=e[28],l=[];for(let i=0;i<r.length;i+=1)l[i]=Sr(kr(e,r,i));return{c(){t=T("div");for(let i=0;i<l.length;i+=1)l[i].c();n=R(),this.h()},l(i){t=N(i,"DIV",{class:!0});var o=S(t);for(let s=0;s<l.length;s+=1)l[s].l(o);n=P(o),o.forEach(p),this.h()},h(){g(t,"class","mt-4 flex flex-grow flex-row items-start gap-2")},m(i,o){O(i,t,o);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null);w(t,n)},p(i,o){if(o[0]&19339){r=i[28];let s;for(s=0;s<r.length;s+=1){const a=kr(i,r,s);l[s]?l[s].p(a,o):(l[s]=Sr(a),l[s].c(),l[s].m(t,n))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(i){i&&p(t),be(l,i)}}}function Oa(e){let t,n,r,l,i,o,s,a,u,c,f;function h(){return e[17](e[31])}function b(){return e[18](e[28],e[31])}function k(m,A){return m[5]===m[31]?Ra:Va}let d=k(e),v=d(e);return{c(){t=T("div"),n=T("button"),r=J(Xt),l=R(),i=T("button"),o=qe("svg"),s=qe("path"),a=R(),v.c(),u=R(),this.h()},l(m){t=N(m,"DIV",{class:!0});var A=S(t);n=N(A,"BUTTON",{});var y=S(n);r=Z(y,Xt),y.forEach(p),l=P(A),i=N(A,"BUTTON",{class:!0});var D=S(i);o=Fe(D,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var z=S(o);s=Fe(z,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),S(s).forEach(p),z.forEach(p),D.forEach(p),a=P(A),v.l(A),u=P(A),A.forEach(p),this.h()},h(){g(s,"stroke-linecap","round"),g(s,"stroke-linejoin","round"),g(s,"d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"),g(o,"xmlns","http://www.w3.org/2000/svg"),g(o,"fill","none"),g(o,"viewBox","0 0 24 24"),g(o,"stroke-width","1.5"),g(o,"stroke","currentColor"),g(o,"class","h-6 w-6"),g(i,"class","h-6"),g(t,"class","flex flex-row items-start gap-2")},m(m,A){O(m,t,A),w(t,n),w(n,r),w(t,l),w(t,i),w(i,o),w(o,s),w(t,a),v.m(t,null),w(t,u),c||(f=[W(n,"click",h),W(i,"click",b)],c=!0)},p(m,A){e=m,d===(d=k(e))&&v?v.p(e,A):(v.d(1),v=d(e),v&&(v.c(),v.m(t,u)))},d(m){m&&p(t),v.d(),c=!1,Ae(f)}}}function Er(e){let t,n,r,l,i,o,s,a,u,c,f,h,b;function k(){return e[25](e[32],e[34],e[31])}function d(){return e[26](e[32])}return{c(){t=T("div"),n=T("form"),r=T("input"),l=R(),i=T("input"),o=R(),s=T("button"),a=J("SAVE"),u=R(),c=T("button"),f=J("DELETE"),this.h()},l(v){t=N(v,"DIV",{class:!0});var m=S(t);n=N(m,"FORM",{class:!0});var A=S(n);r=N(A,"INPUT",{class:!0,type:!0}),l=P(A),i=N(A,"INPUT",{class:!0,type:!0}),o=P(A),s=N(A,"BUTTON",{class:!0,type:!0});var y=S(s);a=Z(y,"SAVE"),y.forEach(p),A.forEach(p),u=P(m),c=N(m,"BUTTON",{class:!0,type:!0});var D=S(c);f=Z(D,"DELETE"),D.forEach(p),m.forEach(p),this.h()},h(){g(r,"class","input-bordered input input-sm"),g(r,"type","text"),g(i,"class","input-bordered input input-sm"),g(i,"type","text"),g(s,"class","btn-primary btn"),g(s,"type","submit"),g(n,"class","flex w-full flex-col gap-2"),g(c,"class","btn-error btn-ghost btn"),g(c,"type","submit"),g(t,"class","absolute -bottom-52 flex w-full flex-col gap-2 rounded border-2 border-black bg-slate-300 p-2")},m(v,m){O(v,t,m),w(t,n),w(n,r),ye(r,e[8]),w(n,l),w(n,i),ye(i,e[9]),w(n,o),w(n,s),w(s,a),w(t,u),w(t,c),w(c,f),h||(b=[W(r,"input",e[23]),W(i,"input",e[24]),W(n,"submit",k),W(c,"click",d)],h=!0)},p(v,m){e=v,m[0]&256&&r.value!==e[8]&&ye(r,e[8]),m[0]&512&&i.value!==e[9]&&ye(i,e[9])},d(v){v&&p(t),h=!1,Ae(b)}}}function Sr(e){let t,n,r=e[32].label+"",l,i,o,s,a=e[32].text+"",u,c,f,h,b,k,d,v,m,A,y,D;function z(){return e[21](e[32])}function U(){return e[22](e[31],e[32])}let X=e[7]===e[31]&&Er(e);return{c(){t=T("div"),n=T("button"),l=J(r),o=R(),s=T("p"),u=J(a),c=R(),f=T("div"),h=R(),b=T("div"),k=T("button"),d=qe("svg"),v=qe("path"),m=R(),X&&X.c(),this.h()},l(ee){t=N(ee,"DIV",{class:!0});var G=S(t);n=N(G,"BUTTON",{class:!0});var q=S(n);l=Z(q,r),q.forEach(p),o=P(G),s=N(G,"P",{class:!0});var K=S(s);u=Z(K,a),K.forEach(p),c=P(G),f=N(G,"DIV",{class:!0}),S(f).forEach(p),h=P(G),b=N(G,"DIV",{class:!0});var Y=S(b);k=N(Y,"BUTTON",{class:!0});var Q=S(k);d=Fe(Q,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var _=S(d);v=Fe(_,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),S(v).forEach(p),_.forEach(p),Q.forEach(p),Y.forEach(p),m=P(G),X&&X.l(G),G.forEach(p),this.h()},h(){g(n,"class",i="btn "+(e[33]?"btn-secondary":"")+" w-full border-none focus:border-none"),g(s,"class","h-fit px-2"),g(f,"class","h-full flex-grow"),g(v,"stroke-linecap","round"),g(v,"stroke-linejoin","round"),g(v,"d","M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"),g(d,"xmlns","http://www.w3.org/2000/svg"),g(d,"fill","none"),g(d,"viewBox","0 0 24 24"),g(d,"stroke-width","1.5"),g(d,"stroke","currentColor"),g(d,"class","h-6 w-6"),g(k,"class","h-fit w-fit pt-2"),g(b,"class","flex w-full flex-row items-end justify-end p-2"),g(t,"class",A="relative flex h-full w-1/4 flex-col gap-2 rounded-xl border-2 "+(e[33]?"border-secondary":"border-black"))},m(ee,G){O(ee,t,G),w(t,n),w(n,l),w(t,o),w(t,s),w(s,u),w(t,c),w(t,f),w(t,h),w(t,b),w(b,k),w(k,d),w(d,v),w(t,m),X&&X.m(t,null),y||(D=[W(n,"click",z),W(k,"click",U)],y=!0)},p(ee,G){e=ee,G[0]&9&&r!==(r=e[32].label+"")&&dt(l,r),G[0]&11&&i!==(i="btn "+(e[33]?"btn-secondary":"")+" w-full border-none focus:border-none")&&g(n,"class",i),G[0]&9&&a!==(a=e[32].text+"")&&dt(u,a),e[7]===e[31]?X?X.p(e,G):(X=Er(e),X.c(),X.m(t,null)):X&&(X.d(1),X=null),G[0]&11&&A!==(A="relative flex h-full w-1/4 flex-col gap-2 rounded-xl border-2 "+(e[33]?"border-secondary":"border-black"))&&g(t,"class",A)},d(ee){ee&&p(t),X&&X.d(),y=!1,Ae(D)}}}function Va(e){let t,n=e[28]+"",r;return{c(){t=T("p"),r=J(n)},l(l){t=N(l,"P",{});var i=S(t);r=Z(i,n),i.forEach(p)},m(l,i){O(l,t,i),w(t,r)},p(l,i){i[0]&9&&n!==(n=l[28]+"")&&dt(r,n)},d(l){l&&p(t)}}}function Ra(e){let t,n,r,l;function i(){return e[20](e[28],e[30],e[31])}return{c(){t=T("form"),n=T("input"),this.h()},l(o){t=N(o,"FORM",{});var s=S(t);n=N(s,"INPUT",{class:!0,type:!0}),s.forEach(p),this.h()},h(){g(n,"class","input-bordered input input-sm"),g(n,"type","text")},m(o,s){O(o,t,s),w(t,n),ye(n,e[6]),r||(l=[W(n,"input",e[19]),W(t,"submit",i)],r=!0)},p(o,s){e=o,s[0]&64&&n.value!==e[6]&&ye(n,e[6])},d(o){o&&p(t),r=!1,Ae(l)}}}function Tr(e){let t;function n(i,o){return i[29]?Oa:Ba}let r=n(e),l=r(e);return{c(){l.c(),t=Se()},l(i){l.l(i),t=Se()},m(i,o){l.m(i,o),O(i,t,o)},p(i,o){r===(r=n(i))&&l?l.p(i,o):(l.d(1),l=r(i),l&&(l.c(),l.m(t.parentNode,t)))},d(i){l.d(i),i&&p(t)}}}function Nr(e){let t,n;return t=new Il({props:{currentBranch:e[1],layer:e[2]+1}}),{c(){Ie(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,l){Me(t,r,l),n=!0},p(r,l){const i={};l[0]&2&&(i.currentBranch=r[1]),l[0]&4&&(i.layer=r[2]+1),t.$set(i)},i(r){n||(te(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function Ar(e){let t=e[3].has(e[1]),n,r,l=t&&Nr(e);return{c(){l&&l.c(),n=Se()},l(i){l&&l.l(i),n=Se()},m(i,o){l&&l.m(i,o),O(i,n,o),r=!0},p(i,o){o[0]&10&&(t=i[3].has(i[1])),t?l?(l.p(i,o),o[0]&10&&te(l,1)):(l=Nr(i),l.c(),te(l,1),l.m(n.parentNode,n)):l&&(Je(),le(l,1,1,()=>{l=null}),Ze())},i(i){r||(te(l),r=!0)},o(i){le(l),r=!1},d(i){l&&l.d(i),i&&p(n)}}}function Pa(e){let t,n=e[3].get(e[0]),r,l=e[1],i,o,s,a,u=n&&xr(fn(e)),c=Ar(e);return{c(){t=T("div"),u&&u.c(),r=R(),c.c(),i=Se(),this.h()},l(f){t=N(f,"DIV",{class:!0});var h=S(t);u&&u.l(h),h.forEach(p),r=P(f),c.l(f),i=Se(),this.h()},h(){g(t,"class","flex w-full flex-col gap-2")},m(f,h){O(f,t,h),u&&u.m(t,null),O(f,r,h),c.m(f,h),O(f,i,h),o=!0,s||(a=W(window,"keypress",e[15]),s=!0)},p(f,h){h[0]&9&&(n=f[3].get(f[0])),n?u?u.p(fn(f),h):(u=xr(fn(f)),u.c(),u.m(t,null)):u&&(u.d(1),u=null),h[0]&2&&Ye(l,l=f[1])?(Je(),le(c,1,1,ce),Ze(),c=Ar(f),c.c(),te(c,1),c.m(i.parentNode,i)):c.p(f,h)},i(f){o||(te(c),o=!0)},o(f){le(c),o=!1},d(f){f&&p(t),u&&u.d(),f&&p(r),f&&p(i),c.d(f),s=!1,a()}}}function La(e,t,n){let r,l;$(e,Ee,_=>n(3,l=_));let{currentBranch:i=""}=t,{nextBranch:o=""}=t,{layer:s=1}=t,a="",u=-1,c="",f=-1,h="",b="";function k(_){n(1,o=o===_?"":_)}function d(){a!==""&&(Ee.addChoiceTo(i,a),n(4,a=""))}function v(){a!==""&&(Ee.addTextTo(i,a),n(4,a=""))}function m(_){Ee.removeChoice(i,_),n(7,f=-1),n(8,h=""),n(9,b="")}const A=_=>{_.code==="Escape"&&(n(5,[u,f]=[-1,-1],u,n(7,f)),n(6,[c,h,b]=["","",""],c,n(8,h),n(9,b)))};function y(){a=this.value,n(4,a)}const D=_=>{var I;(I=l.get(i))==null||I.splice(_,1),Ee.set(l)},z=(_,I)=>{n(6,c=_),u===I?n(5,u=-1):n(5,u=I)};function U(){c=this.value,n(6,c)}const X=(_,I,x)=>{n(5,u=-1),ge(Ee,I[x]=c,l,n(0,i))},ee=_=>k(_.next),G=(_,I)=>{if(f===_){n(7,f=-1);return}n(7,f=_),n(8,h=I.label),n(9,b=I.text)};function q(){h=this.value,n(8,h)}function K(){b=this.value,n(9,b)}const Y=(_,I,x)=>{ge(Ee,I[x].label=h,l,n(0,i)),ge(Ee,I[x].text=b,l,n(0,i)),n(7,f=-1)},Q=_=>m(_.next);return e.$$set=_=>{"currentBranch"in _&&n(0,i=_.currentBranch),"nextBranch"in _&&n(1,o=_.nextBranch),"layer"in _&&n(2,s=_.layer)},e.$$.update=()=>{var _,I,x,E;if(e.$$.dirty[0]&9){e:if(i!==""&&!l.has(i)){Ee.add(i);break e}}e.$$.dirty[0]&9&&n(10,r=((_=l.get(i))==null?void 0:_.length)===0||typeof((I=l.get(i))==null?void 0:I.at(-1))!="string"&&((E=(x=l.get(i))==null?void 0:x.at(-1))==null?void 0:E.length)===4)},[i,o,s,l,a,u,c,f,h,b,r,k,d,v,m,A,y,D,z,U,X,ee,G,q,K,Y,Q]}class Il extends Qe{constructor(t){super(),$e(this,t,La,Pa,Ye,{currentBranch:0,nextBranch:1,layer:2},null,[-1,-1])}}function Ir(e,t,n){const r=e.slice();return r[4]=t[n][0],r[5]=t[n][1],r}function Ua(e){let t,n,r,l;return{c(){t=T("p"),n=J("No dialogue here, create an Interactable at "),r=T("i"),l=J(` to\r
				edit it's dialogue tree.`),this.h()},l(i){t=N(i,"P",{class:!0});var o=S(t);n=Z(o,"No dialogue here, create an Interactable at "),r=N(o,"I",{class:!0}),S(r).forEach(p),l=Z(o,` to\r
				edit it's dialogue tree.`),o.forEach(p),this.h()},h(){g(r,"class","twa twa-books"),g(t,"class","text-xl")},m(i,o){O(i,t,o),w(t,n),w(t,r),w(t,l)},p:ce,i:ce,o:ce,d(i){i&&p(t)}}}function qa(e){let t,n,r,l,i,o,s,a,u,c,f,h,b,k=e[2],d=[];for(let v=0;v<k.length;v+=1)d[v]=Dr(Ir(e,k,v));return c=new Il({props:{currentBranch:e[0].toString()}}),{c(){t=T("div"),n=T("select"),r=T("option"),l=J("Choose an Interactable");for(let v=0;v<d.length;v+=1)d[v].c();i=R(),o=T("span"),s=T("i"),u=R(),Ie(c.$$.fragment),this.h()},l(v){t=N(v,"DIV",{class:!0});var m=S(t);n=N(m,"SELECT",{class:!0,name:!0});var A=S(n);r=N(A,"OPTION",{});var y=S(r);l=Z(y,"Choose an Interactable"),y.forEach(p);for(let z=0;z<d.length;z+=1)d[z].l(A);A.forEach(p),i=P(m),o=N(m,"SPAN",{class:!0});var D=S(o);s=N(D,"I",{class:!0}),S(s).forEach(p),D.forEach(p),m.forEach(p),u=P(v),De(c.$$.fragment,v),this.h()},h(){var v;r.disabled=!0,r.__value="",r.value=r.__value,g(n,"class","select-bordered select"),g(n,"name","interactable"),e[0]===void 0&&Tt(()=>e[3].call(n)),g(s,"class",a="twa twa-"+((v=e[1].get(e[0]))==null?void 0:v.emoji)),g(o,"class","flex w-full justify-start py-4 text-4xl"),g(t,"class","flex flex-row items-center gap-2")},m(v,m){O(v,t,m),w(t,n),w(n,r),w(r,l);for(let A=0;A<d.length;A+=1)d[A]&&d[A].m(n,null);ut(n,e[0],!0),w(t,i),w(t,o),w(o,s),O(v,u,m),Me(c,v,m),f=!0,h||(b=W(n,"change",e[3]),h=!0)},p(v,m){var y;if(m&4){k=v[2];let D;for(D=0;D<k.length;D+=1){const z=Ir(v,k,D);d[D]?d[D].p(z,m):(d[D]=Dr(z),d[D].c(),d[D].m(n,null))}for(;D<d.length;D+=1)d[D].d(1);d.length=k.length}m&5&&ut(n,v[0]),(!f||m&7&&a!==(a="twa twa-"+((y=v[1].get(v[0]))==null?void 0:y.emoji)))&&g(s,"class",a);const A={};m&1&&(A.currentBranch=v[0].toString()),c.$set(A)},i(v){f||(te(c.$$.fragment,v),f=!0)},o(v){le(c.$$.fragment,v),f=!1},d(v){v&&p(t),be(d,v),v&&p(u),Ce(c,v),h=!1,b()}}}function Dr(e){let t,n=e[5].emoji+"",r;return{c(){t=T("option"),r=J(n),this.h()},l(l){t=N(l,"OPTION",{});var i=S(t);r=Z(i,n),i.forEach(p),this.h()},h(){t.__value=e[4],t.value=t.__value},m(l,i){O(l,t,i),w(t,r)},p:ce,d(l){l&&p(t)}}}function Fa(e){let t,n,r,l,i;const o=[qa,Ua],s=[];function a(u,c){return u[2].length>0?0:1}return r=a(e),l=s[r]=o[r](e),{c(){t=T("main"),n=T("div"),l.c(),this.h()},l(u){t=N(u,"MAIN",{});var c=S(t);n=N(c,"DIV",{class:!0});var f=S(n);l.l(f),f.forEach(p),c.forEach(p),this.h()},h(){g(n,"class","flex h-[624px] w-[972px] flex-col items-start gap-2 overflow-y-auto px-4 2xl:h-[720px] 2xl:w-[1068px]")},m(u,c){O(u,t,c),w(t,n),s[r].m(n,null),i=!0},p(u,[c]){l.p(u,c)},i(u){i||(te(l),i=!0)},o(u){le(l),i=!1},d(u){u&&p(t),s[r].d()}}}function Ha(e,t,n){let r;$(e,Gt,s=>n(1,r=s));let l="";const i=[...r].filter(([s,{emoji:a}])=>a!=""&&a!=null);function o(){l=hn(this),n(0,l),n(2,i)}return[l,r,i,o]}class Xa extends Qe{constructor(t){super(),$e(this,t,Ha,Fa,Ye,{})}}function Mr(e,t,n){const r=e.slice();r[5]=t[n];const l=r[5].replaceAll("-"," ");return r[6]=l,r}function Cr(e){let t,n,r,l,i,o,s;function a(){return e[4](e[5])}return{c(){t=T("button"),n=T("i"),l=R(),this.h()},l(u){t=N(u,"BUTTON",{title:!0});var c=S(t);n=N(c,"I",{class:!0}),S(n).forEach(p),l=P(c),c.forEach(p),this.h()},h(){g(n,"class",r="twa twa-"+e[5].replace("_",e[2])),g(t,"title",i=e[6]),_t(t,"selected",e[0]===e[5])},m(u,c){O(u,t,c),w(t,n),w(t,l),o||(s=W(t,"click",a),o=!0)},p(u,c){e=u,c&6&&r!==(r="twa twa-"+e[5].replace("_",e[2]))&&g(n,"class",r),c&2&&i!==(i=e[6])&&g(t,"title",i),c&3&&_t(t,"selected",e[0]===e[5])},d(u){u&&p(t),o=!1,s()}}}function Ga(e){let t,n,r,l,i,o=[...e[1]],s=[];for(let a=0;a<o.length;a+=1)s[a]=Cr(Mr(e,o,a));return{c(){t=T("label"),n=T("span"),r=J("Recently Used"),l=R(),i=T("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){t=N(a,"LABEL",{for:!0,class:!0});var u=S(t);n=N(u,"SPAN",{class:!0});var c=S(n);r=Z(c,"Recently Used"),c.forEach(p),u.forEach(p),l=P(a),i=N(a,"DIV",{class:!0});var f=S(i);for(let h=0;h<s.length;h+=1)s[h].l(f);f.forEach(p),this.h()},h(){g(n,"class","label-text text-xs text-neutral-content 2xl:text-base"),g(t,"for","recently-used"),g(t,"class","label"),g(i,"class","emojis flex flex-wrap-reverse justify-center")},m(a,u){O(a,t,u),w(t,n),w(n,r),O(a,l,u),O(a,i,u);for(let c=0;c<s.length;c+=1)s[c]&&s[c].m(i,null)},p(a,[u]){if(u&15){o=[...a[1]];let c;for(c=0;c<o.length;c+=1){const f=Mr(a,o,c);s[c]?s[c].p(f,u):(s[c]=Cr(f),s[c].c(),s[c].m(i,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=o.length}},i:ce,o:ce,d(a){a&&p(t),a&&p(l),a&&p(i),be(s,a)}}}function Ya(e,t,n){let r,l,i;$(e,He,a=>n(0,r=a)),$(e,Nt,a=>n(1,l=a)),$(e,dn,a=>n(2,i=a));function o(a){ge(He,r=a===r?"":a,r)}return[r,l,i,o,a=>o(a)]}class Dl extends Qe{constructor(t){super(),$e(this,t,Ya,Ga,Ye,{})}}function ja(e){const t=e.slice(),n=t[1]?t[7]:t[6];t[23]=n;const r=t[1]?"UPDATE":"PUBLISH";return t[24]=r,t}function Wa(e){let t,n;return{c(){t=T("p"),n=J("Go back to main menu and login to publish your game.")},l(r){t=N(r,"P",{});var l=S(t);n=Z(l,"Go back to main menu and login to publish your game."),l.forEach(p)},m(r,l){O(r,t,l),w(t,n)},p:ce,d(r){r&&p(t)}}}function zr(e){let t,n,r,l,i,o,s,a,u,c,f,h,b,k,d,v,m,A,y,D,z,U=e[24]+"",X,ee,G,q,K=e[1]&&Br(e);return{c(){t=T("div"),n=T("label"),r=J("Name"),l=R(),i=T("input"),o=R(),s=T("label"),a=J("Description"),u=R(),c=T("textarea"),f=R(),h=T("div"),b=R(),k=T("div"),d=T("button"),v=J("DOWNLOAD SAVE FILE"),m=R(),A=T("div"),y=R(),K&&K.c(),D=R(),z=T("button"),X=J(U),this.h()},l(Y){t=N(Y,"DIV",{class:!0});var Q=S(t);n=N(Q,"LABEL",{class:!0,for:!0});var _=S(n);r=Z(_,"Name"),_.forEach(p),l=P(Q),i=N(Q,"INPUT",{type:!0,class:!0}),o=P(Q),s=N(Q,"LABEL",{class:!0,for:!0});var I=S(s);a=Z(I,"Description"),I.forEach(p),u=P(Q),c=N(Q,"TEXTAREA",{class:!0}),S(c).forEach(p),f=P(Q),h=N(Q,"DIV",{class:!0}),S(h).forEach(p),b=P(Q),k=N(Q,"DIV",{class:!0});var x=S(k);d=N(x,"BUTTON",{class:!0});var E=S(d);v=Z(E,"DOWNLOAD SAVE FILE"),E.forEach(p),m=P(x),A=N(x,"DIV",{class:!0}),S(A).forEach(p),y=P(x),K&&K.l(x),D=P(x),z=N(x,"BUTTON",{class:!0});var C=S(z);X=Z(C,U),C.forEach(p),x.forEach(p),Q.forEach(p),this.h()},h(){g(n,"class","p-1"),g(n,"for","name"),g(i,"type","text"),g(i,"class","input-bordered input"),g(s,"class","p-1 pt-4"),g(s,"for","description"),g(c,"class","textarea-bordered textarea h-full"),g(h,"class","flex-grow"),g(d,"class","btn"),g(A,"class","flex-grow"),g(z,"class",ee="btn "+(e[3]?"":"loading")),g(k,"class","flex w-full flex-row gap-2 self-end pt-4"),g(t,"class","flex h-full w-full flex-col")},m(Y,Q){O(Y,t,Q),w(t,n),w(n,r),w(t,l),w(t,i),ye(i,e[4].currentSaveName),w(t,o),w(t,s),w(s,a),w(t,u),w(t,c),ye(c,e[0]),w(t,f),w(t,h),w(t,b),w(t,k),w(k,d),w(d,v),w(k,m),w(k,A),w(k,y),K&&K.m(k,null),w(k,D),w(k,z),w(z,X),G||(q=[W(i,"input",e[10]),W(c,"input",e[11]),W(d,"click",e[9]),W(z,"click",function(){Ol(e[23])&&e[23].apply(this,arguments)})],G=!0)},p(Y,Q){e=Y,Q&16&&i.value!==e[4].currentSaveName&&ye(i,e[4].currentSaveName),Q&1&&ye(c,e[0]),e[1]?K?K.p(e,Q):(K=Br(e),K.c(),K.m(k,D)):K&&(K.d(1),K=null),Q&2&&U!==(U=e[24]+"")&&dt(X,U),Q&8&&ee!==(ee="btn "+(e[3]?"":"loading"))&&g(z,"class",ee)},d(Y){Y&&p(t),K&&K.d(),G=!1,Ae(q)}}}function Br(e){let t,n,r,l,i,o,s,a;return{c(){t=T("button"),n=J("Unpublish"),r=R(),l=T("a"),i=J("GO TO GAME LINK"),this.h()},l(u){t=N(u,"BUTTON",{class:!0});var c=S(t);n=Z(c,"Unpublish"),c.forEach(p),r=P(u),l=N(u,"A",{href:!0,class:!0});var f=S(l);i=Z(f,"GO TO GAME LINK"),f.forEach(p),this.h()},h(){g(t,"class","btn-ghost btn border-none hover:border-none hover:bg-error hover:text-error-content"),g(l,"href",o="/games/"+e[2].get(e[4].currentSaveID)),g(l,"class","btn")},m(u,c){O(u,t,c),w(t,n),O(u,r,c),O(u,l,c),w(l,i),s||(a=W(t,"click",e[8]),s=!0)},p(u,c){c&20&&o!==(o="/games/"+u[2].get(u[4].currentSaveID))&&g(l,"href",o)},d(u){u&&p(t),u&&p(r),u&&p(l),s=!1,a()}}}function Ka(e){let t,n;function r(s,a){return s[5].data.session?zr:Wa}function l(s,a){return a===zr?ja(s):s}let i=r(e),o=i(l(e,i));return{c(){t=T("main"),n=T("div"),o.c(),this.h()},l(s){t=N(s,"MAIN",{});var a=S(t);n=N(a,"DIV",{class:!0});var u=S(n);o.l(u),u.forEach(p),a.forEach(p),this.h()},h(){g(n,"class","flex h-[624px] w-[972px] flex-col items-start gap-2 overflow-y-auto px-4 2xl:h-[720px] 2xl:w-[1068px]")},m(s,a){O(s,t,a),w(t,n),o.m(n,null)},p(s,[a]){i===(i=r(s))&&o?o.p(l(s,i),a):(o.d(1),o=i(l(s,i)),o&&(o.c(),o.m(n,null)))},i:ce,o:ce,d(s){s&&p(t),o.d()}}}function Ja(e,t,n){let r,l,i,o,s,a,u,c,f,h,b;$(e,Yt,q=>n(4,r=q)),$(e,Ee,q=>n(14,l=q)),$(e,_n,q=>n(15,i=q)),$(e,pn,q=>n(16,o=q)),$(e,Gt,q=>n(17,s=q)),$(e,mn,q=>n(18,a=q)),$(e,gn,q=>n(19,u=q)),$(e,bn,q=>n(20,c=q)),$(e,St,q=>n(21,f=q)),$(e,oe,q=>n(22,h=q)),$(e,jl,q=>n(5,b=q));let k,d=!1,v,m,A,y=!0;en(()=>{n(2,m=JSON.parse(localStorage.getItem("publishes"))),A=JSON.parse(localStorage.getItem("descriptions")),n(2,m=new Map(m||[])),A=new Map(A||[]),m.has(r.currentSaveID)&&n(1,d=!0),n(0,k=A.get(r.currentSaveID)||""),v={map:{items:Array.from(h.items),backgrounds:Array.from(h.backgrounds),colors:Array.from(h.colors),dbg:h.dbg,ssi:h.ssi},rbxs:f,pushers:Array.from(c),mergers:Array.from(u),effectors:Array.from(a),interactables:Array.from(s),controllables:Array.from(o),sequencers:Array.from(i),dt:Array.from(l)}});async function D(){var Y;if(!oe.hasControllable()){Te.warning("No controllable found in the starting section.");return}n(3,y=!1);const q=crypto.randomUUID(),{error:K}=await b.data.supabase.from("games").insert({id:q,data:v,name:r.currentSaveName,description:k,user_id:(Y=b.data.session)==null?void 0:Y.user.id});if(n(3,y=!0),K){Te.warning("Failed to publish the game. Try again later.");return}m.set(r.currentSaveID,q),localStorage.setItem("publishes",JSON.stringify(Array.from(m))),Te.success(r.currentSaveName+" got published!"),n(1,d=!0)}async function z(){if(!oe.hasControllable()){Te.warning("No controllable found in the starting section.");return}n(3,y=!1);const{data:q,error:K}=await b.data.supabase.from("games").update({name:r.currentSaveName,description:k,data:v}).eq("id",m.get(r.currentSaveID));if(n(3,y=!0),K){Te.warning("Failed to update the game. Try again later.");return}m.set(r.currentSaveID,k),localStorage.setItem("descriptions",JSON.stringify(Array.from(A))),Te.success("Game updated successfully.")}function U(){ql.show({content:'If you unpublish your game, it will be <span class="text-error">deleted from our servers<span/> and will not be visible to other players. <span class="text-success">Saves on your local device will be intact.<span/>',header:"Unpublish Game",confirmText:"UNPUBLISH",onConfirm:async()=>{const{error:q}=await b.data.supabase.from("games").delete().eq("id",m.get(r.currentSaveID));if(q){Te.warning("Failed to unpublish the game. Try again later.");return}Te.success("Game successfully got unpublished."),n(1,d=!1),m.delete(r.currentSaveID),localStorage.setItem("publishes",JSON.stringify(Array.from(m)))},input:!1,danger:!0})}function X(){let K="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify({map:h,rbxs:f,pushers:c,mergers:u,effectors:a,interactables:s,controllables:o,sequencers:i,dt:l})),Y=document.createElement("a");Y.setAttribute("href",K),Y.setAttribute("download","emojistan-"+r.currentSaveID+".json"),document.body.appendChild(Y),Y.click(),Y.remove()}function ee(){r.currentSaveName=this.value,Yt.set(r)}function G(){k=this.value,n(0,k)}return[k,d,m,y,r,b,D,z,U,X,ee,G]}class Za extends Qe{constructor(t){super(),$e(this,t,Ja,Ka,Ye,{})}}function Or(e,t,n){const r=e.slice();return r[50]=t[n],r}function Vr(e,t,n){const r=e.slice();r[53]=t[n];const l=r[53].replaceAll("-"," ");return r[54]=l,r}function Rr(e,t,n){const r=e.slice();r[57]=t[n][0],r[58]=t[n][1];const l=r[23]===r[58];return r[59]=l,r}function Pr(e,t,n){const r=e.slice();return r[50]=t[n],r}function Lr(e,t,n){const r=e.slice();r[64]=t[n],r[66]=n;const l=r[66]==r[2];return r[59]=l,r}function Ur(e,t,n){const r=e.slice();r[67]=t[n];const l=r[67]===r[12].dbg;return r[68]=l,r}function qr(e,t,n){const r=e.slice();return r[71]=t[n],r}function Qa(e,t,n){const r=e.slice();return r[71]=t[n],r}function Fr(e,t,n){const r=e.slice();r[76]=t[n][0],r[77]=t[n][1];const l=r[77].split("|");return r[78]=l[0],r[54]=l[1],r}function Hr(e){let t,n,r,l;const i=[eu,$a],o=[];function s(a,u){return a[7]?0:1}return n=s(e),r=o[n]=i[n](e),{c(){t=T("main"),r.c(),this.h()},l(a){t=N(a,"MAIN",{class:!0});var u=S(t);r.l(u),u.forEach(p),this.h()},h(){g(t,"class","editor relative box-border flex h-screen flex-col items-center justify-center overflow-hidden")},m(a,u){O(a,t,u),o[n].m(t,null),l=!0},p(a,u){let c=n;n=s(a),n===c?o[n].p(a,u):(Je(),le(o[c],1,1,()=>{o[c]=null}),Ze(),r=o[n],r?r.p(a,u):(r=o[n]=i[n](a),r.c()),te(r,1),r.m(t,null))},i(a){l||(te(r),l=!0)},o(a){le(r),l=!1},d(a){a&&p(t),o[n].d()}}}function $a(e){let t,n,r,l,i,o,s,a,u,c,f,h,b,k=Object.entries(e[30]),d=[];for(let y=0;y<k.length;y+=1)d[y]=Xr(Fr(e,k,y));const v=[ru,nu,tu],m=[];function A(y,D){return y[8]==="dialogue"?0:y[8]=="publish"?1:2}return r=A(e),l=m[r]=v[r](e),{c(){t=T("div");for(let y=0;y<d.length;y+=1)d[y].c();n=R(),l.c(),i=R(),o=T("div"),s=T("div"),a=T("kbd"),u=J("Esc"),c=R(),f=T("p"),h=J("untoggle emoji / color"),this.h()},l(y){t=N(y,"DIV",{class:!0});var D=S(t);for(let G=0;G<d.length;G+=1)d[G].l(D);D.forEach(p),n=P(y),l.l(y),i=P(y),o=N(y,"DIV",{class:!0});var z=S(o);s=N(z,"DIV",{class:!0});var U=S(s);a=N(U,"KBD",{class:!0});var X=S(a);u=Z(X,"Esc"),X.forEach(p),c=P(U),f=N(U,"P",{class:!0});var ee=S(f);h=Z(ee,"untoggle emoji / color"),ee.forEach(p),U.forEach(p),z.forEach(p),this.h()},h(){g(t,"class","flex h-full w-full flex-row items-center justify-center gap-4 text-lg 2xl:top-8 2xl:text-2xl"),g(a,"class","kbd kbd-sm mr-2 2xl:kbd-md"),g(f,"class","2xl:text-md text-sm"),g(s,"class","absolute bottom-8 left-8 flex flex-row items-center md:bottom-4 md:left-4"),g(o,"class","relative flex h-full w-full flex-col items-center justify-center")},m(y,D){O(y,t,D);for(let z=0;z<d.length;z+=1)d[z]&&d[z].m(t,null);O(y,n,D),m[r].m(y,D),O(y,i,D),O(y,o,D),w(o,s),w(s,a),w(a,u),w(s,c),w(s,f),w(f,h),b=!0},p(y,D){if(D[0]&1073742080|D[1]&1){k=Object.entries(y[30]);let U;for(U=0;U<k.length;U+=1){const X=Fr(y,k,U);d[U]?d[U].p(X,D):(d[U]=Xr(X),d[U].c(),d[U].m(t,null))}for(;U<d.length;U+=1)d[U].d(1);d.length=k.length}let z=r;r=A(y),r===z?m[r].p(y,D):(Je(),le(m[z],1,1,()=>{m[z]=null}),Ze(),l=m[r],l?l.p(y,D):(l=m[r]=v[r](y),l.c()),te(l,1),l.m(i.parentNode,i))},i(y){b||(te(l),b=!0)},o(y){le(l),b=!1},d(y){y&&p(t),be(d,y),y&&p(n),m[r].d(y),y&&p(i),y&&p(o)}}}function eu(e){let t,n,r,l,i,o,s,a,u,c,f,h,b,k;return l=new Pl({props:{map:structuredClone(e[12]),pushers:e[16],mergers:e[17],controllables:e[18],interactables:e[19],sequencers:e[20],effectors:e[21],dt:e[22]}}),l.$on("noPlayer",e[36]),l.$on("quit",e[37]),{c(){t=T("button"),n=J(Xt),r=R(),Ie(l.$$.fragment),i=R(),o=T("div"),s=T("kbd"),a=J("Esc"),u=R(),c=T("p"),f=J("Exit test mode"),this.h()},l(d){t=N(d,"BUTTON",{class:!0});var v=S(t);n=Z(v,Xt),v.forEach(p),r=P(d),De(l.$$.fragment,d),i=P(d),o=N(d,"DIV",{class:!0});var m=S(o);s=N(m,"KBD",{class:!0});var A=S(s);a=Z(A,"Esc"),A.forEach(p),u=P(m),c=N(m,"P",{class:!0});var y=S(c);f=Z(y,"Exit test mode"),y.forEach(p),m.forEach(p),this.h()},h(){g(t,"class","absolute right-4 top-4 z-10 text-4xl"),g(s,"class","kbd kbd-sm mr-2 2xl:kbd-md"),g(c,"class","2xl:text-md text-sm"),g(o,"class","absolute bottom-8 left-8 flex flex-row items-center md:bottom-4 md:left-4")},m(d,v){O(d,t,v),w(t,n),O(d,r,v),Me(l,d,v),O(d,i,v),O(d,o,v),w(o,s),w(s,a),w(o,u),w(o,c),w(c,f),h=!0,b||(k=W(t,"click",e[32]),b=!0)},p(d,v){const m={};v[0]&4096&&(m.map=structuredClone(d[12])),v[0]&65536&&(m.pushers=d[16]),v[0]&131072&&(m.mergers=d[17]),v[0]&262144&&(m.controllables=d[18]),v[0]&524288&&(m.interactables=d[19]),v[0]&1048576&&(m.sequencers=d[20]),v[0]&2097152&&(m.effectors=d[21]),v[0]&4194304&&(m.dt=d[22]),l.$set(m)},i(d){h||(te(l.$$.fragment,d),h=!0)},o(d){le(l.$$.fragment,d),h=!1},d(d){d&&p(t),d&&p(r),Ce(l,d),d&&p(i),d&&p(o),b=!1,k()}}}function Xr(e){let t,n,r,l,i,o;function s(){return e[38](e[76])}return{c(){t=T("button"),n=T("i"),r=R(),this.h()},l(a){t=N(a,"BUTTON",{title:!0,class:!0});var u=S(t);n=N(u,"I",{class:!0}),S(n).forEach(p),r=P(u),u.forEach(p),this.h()},h(){g(n,"class","twa twa-"+e[78]+" svelte-18w5ayy"),g(t,"title",e[54]),g(t,"class",l=(e[8]===e[76]?"scale-125 bg-primary":"bg-neutral")+" btn-square rounded duration-200 ease-out hover:scale-125")},m(a,u){O(a,t,u),w(t,n),w(t,r),i||(o=W(t,"click",s),i=!0)},p(a,u){e=a,u[0]&256&&l!==(l=(e[8]===e[76]?"scale-125 bg-primary":"bg-neutral")+" btn-square rounded duration-200 ease-out hover:scale-125")&&g(t,"class",l)},d(a){a&&p(t),i=!1,o()}}}function tu(e){let t,n,r,l,i,o,s,a,u,c,f,h,b,k,d,v,m,A,y,D;const z=[iu,lu],U=[];function X(E,C){return E[8]==="editor"?0:E[8]=="rules"?1:-1}~(r=X(e))&&(l=U[r]=z[r](e));const ee=[au,su],G=[];function q(E,C){return E[8]==="editor"?0:E[8]==="rules"?1:-1}~(o=q(e))&&(s=G[o]=ee[o](e));let K=Object.keys(ct),Y=[];for(let E=0;E<K.length;E+=1)Y[E]=Kr(Pr(e,K,E));let Q=e[33],_=[];for(let E=0;E<Q.length;E+=1)_[E]=Jr(Rr(e,Q,E));let I=Object.keys(ct),x=[];for(let E=0;E<I.length;E+=1)x[E]=el(Or(e,I,E));return{c(){t=T("div"),n=T("aside"),l&&l.c(),i=R(),s&&s.c(),a=R(),u=T("aside"),c=T("div"),f=T("input"),h=R(),b=T("div");for(let E=0;E<Y.length;E+=1)Y[E].c();k=R(),d=T("div");for(let E=0;E<_.length;E+=1)_[E].c();v=R(),m=T("div");for(let E=0;E<x.length;E+=1)x[E].c();this.h()},l(E){t=N(E,"DIV",{class:!0});var C=S(t);n=N(C,"ASIDE",{class:!0});var V=S(n);l&&l.l(V),V.forEach(p),i=P(C),s&&s.l(C),a=P(C),u=N(C,"ASIDE",{class:!0});var H=S(u);c=N(H,"DIV",{class:!0});var M=S(c);f=N(M,"INPUT",{class:!0,type:!0,placeholder:!0}),h=P(M),b=N(M,"DIV",{class:!0});var j=S(b);for(let re=0;re<Y.length;re+=1)Y[re].l(j);j.forEach(p),k=P(M),d=N(M,"DIV",{class:!0});var ae=S(d);for(let re=0;re<_.length;re+=1)_[re].l(ae);ae.forEach(p),M.forEach(p),v=P(H),m=N(H,"DIV",{id:!0});var ne=S(m);for(let re=0;re<x.length;re+=1)x[re].l(ne);ne.forEach(p),H.forEach(p),C.forEach(p),this.h()},h(){g(n,"class","aside overflow-y-auto overflow-x-visible"),g(f,"class","input-bordered input input-sm w-full 2xl:input-md"),g(f,"type","text"),g(f,"placeholder","Search"),g(b,"class","my-4 grid grid-cols-4 grid-rows-2 gap-4"),g(d,"class","flex flex-row gap-2"),g(c,"class","sticky top-0 flex w-full flex-col items-center justify-center gap-4 bg-slate-500 p-4 pt-8"),g(m,"id","flex flex-col"),g(u,"class","aside overflow-y-auto pt-0"),g(t,"class","relative box-border flex flex-row items-center justify-center")},m(E,C){O(E,t,C),w(t,n),~r&&U[r].m(n,null),w(t,i),~o&&G[o].m(t,null),w(t,a),w(t,u),w(u,c),w(c,f),ye(f,e[1]),w(c,h),w(c,b);for(let V=0;V<Y.length;V+=1)Y[V]&&Y[V].m(b,null);w(c,k),w(c,d);for(let V=0;V<_.length;V+=1)_[V]&&_[V].m(d,null);w(u,v),w(u,m);for(let V=0;V<x.length;V+=1)x[V]&&x[V].m(m,null);A=!0,y||(D=W(f,"input",e[45]),y=!0)},p(E,C){let V=r;r=X(E),r===V?~r&&U[r].p(E,C):(l&&(Je(),le(U[V],1,1,()=>{U[V]=null}),Ze()),~r?(l=U[r],l?l.p(E,C):(l=U[r]=z[r](E),l.c()),te(l,1),l.m(n,null)):l=null);let H=o;if(o=q(E),o===H?~o&&G[o].p(E,C):(s&&(Je(),le(G[H],1,1,()=>{G[H]=null}),Ze()),~o?(s=G[o],s?s.p(E,C):(s=G[o]=ee[o](E),s.c()),te(s,1),s.m(t,a)):s=null),C[0]&2&&f.value!==E[1]&&ye(f,E[1]),C[0]&1){K=Object.keys(ct);let M;for(M=0;M<K.length;M+=1){const j=Pr(E,K,M);Y[M]?Y[M].p(j,C):(Y[M]=Kr(j),Y[M].c(),Y[M].m(b,null))}for(;M<Y.length;M+=1)Y[M].d(1);Y.length=K.length}if(C[0]&8388608|C[1]&4){Q=E[33];let M;for(M=0;M<Q.length;M+=1){const j=Rr(E,Q,M);_[M]?_[M].p(j,C):(_[M]=Jr(j),_[M].c(),_[M].m(d,null))}for(;M<_.length;M+=1)_[M].d(1);_.length=Q.length}if(C[0]&41945091){I=Object.keys(ct);let M;for(M=0;M<I.length;M+=1){const j=Or(E,I,M);x[M]?x[M].p(j,C):(x[M]=el(j),x[M].c(),x[M].m(m,null))}for(;M<x.length;M+=1)x[M].d(1);x.length=I.length}},i(E){A||(te(l),te(s),A=!0)},o(E){le(l),le(s),A=!1},d(E){E&&p(t),~r&&U[r].d(),~o&&G[o].d(),be(Y,E),be(_,E),be(x,E),y=!1,D()}}}function nu(e){let t,n;return t=new Za({}),{c(){Ie(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,l){Me(t,r,l),n=!0},p:ce,i(r){n||(te(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function ru(e){let t,n;return t=new Xa({}),{c(){Ie(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,l){Me(t,r,l),n=!0},p:ce,i(r){n||(te(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function lu(e){let t,n;return t=new Dl({}),{c(){Ie(t.$$.fragment)},l(r){De(t.$$.fragment,r)},m(r,l){Me(t,r,l),n=!0},p:ce,i(r){n||(te(t.$$.fragment,r),n=!0)},o(r){le(t.$$.fragment,r),n=!1},d(r){Ce(t,r)}}}function iu(e){let t,n,r,l,i,o,s,a,u,c,f,h,b,k,d,v,m,A,y,D,z,U,X=e[27][e[5]]+"",ee,G,q,K,Y,Q,_,I,x,E,C,V,H,M,j,ae,ne,re,pe,fe,ue,xe,gt,bt,Be,vt,Le,Bt,lt,B,wt,Rn;s=new Dl({});let Ml=["Foreground","Background"],it=[];for(let L=0;L<2;L+=1)it[L]=ou(Qa(e,Ml,L));let ot=e[26],he=[];for(let L=0;L<ot.length;L+=1)he[L]=Gr(qr(e,ot,L));let st=Jn,de=[];for(let L=0;L<st.length;L+=1)de[L]=Yr(Ur(e,st,L));let at={length:Ve*Ve},_e=[];for(let L=0;L<at.length;L+=1)_e[L]=Wr(Lr(e,at,L));return{c(){t=T("div"),n=T("button"),r=J("TEST"),l=R(),i=T("div"),o=T("div"),Ie(s.$$.fragment),a=R(),u=T("label"),c=T("span"),f=J("Emoji Mode"),h=R(),b=T("select");for(let L=0;L<2;L+=1)it[L].c();k=R(),d=T("label"),v=T("span"),m=J("Copy / Delete Mode"),A=R(),y=T("select");for(let L=0;L<he.length;L+=1)he[L].c();D=R(),z=T("button"),U=J("CLEAR "),ee=J(X),G=R(),q=T("button"),K=J("Fill With "),Y=T("i"),I=R(),x=T("label"),E=T("span"),C=J("Palette"),V=R(),H=T("div");for(let L=0;L<de.length;L+=1)de[L].c();M=R(),j=T("button"),ae=J("Set "),ne=T("div"),re=J(`\r
										as default`),fe=R(),ue=T("label"),xe=T("span"),gt=J("World Map"),bt=R(),Be=T("div");for(let L=0;L<_e.length;L+=1)_e[L].c();vt=R(),Le=T("button"),Bt=J("Set as "),lt=T("i"),this.h()},l(L){t=N(L,"DIV",{class:!0});var se=S(t);n=N(se,"BUTTON",{class:!0});var F=S(n);r=Z(F,"TEST"),F.forEach(p),l=P(se),i=N(se,"DIV",{class:!0});var ie=S(i);o=N(ie,"DIV",{class:!0});var Oe=S(o);De(s.$$.fragment,Oe),a=P(Oe),u=N(Oe,"LABEL",{for:!0,class:!0});var Pn=S(u);c=N(Pn,"SPAN",{class:!0});var Ln=S(c);f=Z(Ln,"Emoji Mode"),Ln.forEach(p),Pn.forEach(p),h=P(Oe),b=N(Oe,"SELECT",{id:!0,class:!0});var Un=S(b);for(let me=0;me<2;me+=1)it[me].l(Un);Un.forEach(p),k=P(Oe),d=N(Oe,"LABEL",{for:!0,class:!0});var qn=S(d);v=N(qn,"SPAN",{class:!0});var Fn=S(v);m=Z(Fn,"Copy / Delete Mode"),Fn.forEach(p),qn.forEach(p),A=P(Oe),y=N(Oe,"SELECT",{id:!0,class:!0});var Hn=S(y);for(let me=0;me<he.length;me+=1)he[me].l(Hn);Hn.forEach(p),Oe.forEach(p),D=P(ie),z=N(ie,"BUTTON",{class:!0});var ln=S(z);U=Z(ln,"CLEAR "),ee=Z(ln,X),ln.forEach(p),G=P(ie),q=N(ie,"BUTTON",{id:!0,class:!0});var on=S(q);K=Z(on,"Fill With "),Y=N(on,"I",{class:!0}),S(Y).forEach(p),on.forEach(p),I=P(ie),x=N(ie,"LABEL",{class:!0});var Xn=S(x);E=N(Xn,"SPAN",{class:!0});var Gn=S(E);C=Z(Gn,"Palette"),Gn.forEach(p),Xn.forEach(p),V=P(ie),H=N(ie,"DIV",{class:!0});var Yn=S(H);for(let me=0;me<de.length;me+=1)de[me].l(Yn);Yn.forEach(p),M=P(ie),j=N(ie,"BUTTON",{class:!0});var Ot=S(j);ae=Z(Ot,"Set "),ne=N(Ot,"DIV",{class:!0}),S(ne).forEach(p),re=Z(Ot,`\r
										as default`),Ot.forEach(p),fe=P(ie),ue=N(ie,"LABEL",{class:!0});var jn=S(ue);xe=N(jn,"SPAN",{class:!0});var Wn=S(xe);gt=Z(Wn,"World Map"),Wn.forEach(p),jn.forEach(p),bt=P(ie),Be=N(ie,"DIV",{id:!0,class:!0});var Kn=S(Be);for(let me=0;me<_e.length;me+=1)_e[me].l(Kn);Kn.forEach(p),vt=P(ie),Le=N(ie,"BUTTON",{class:!0});var sn=S(Le);Bt=Z(sn,"Set as "),lt=N(sn,"I",{class:!0}),S(lt).forEach(p),sn.forEach(p),ie.forEach(p),se.forEach(p),this.h()},h(){g(n,"class","btn mb-8 bg-primary text-lg text-primary-content 2xl:btn-md hover:bg-primary-focus"),g(c,"class","label-text text-xs text-neutral-content 2xl:text-base"),g(u,"for","emoji-mode"),g(u,"class","label"),g(b,"id","emoji-mode"),g(b,"class","select-bordered select 2xl:text-base"),e[6]===void 0&&Tt(()=>e[39].call(b)),g(v,"class","label-text text-xs text-neutral-content 2xl:text-base"),g(d,"for","copy-delete-mode"),g(d,"class","label"),g(y,"id","copy-delete-mode"),g(y,"class","select-bordered select 2xl:text-base"),e[5]===void 0&&Tt(()=>e[40].call(y)),g(o,"class","form-control"),g(z,"class","btn bg-accent text-lg text-accent-content 2xl:btn-md hover:bg-accent-focus"),g(Y,"class",Q="twa twa-"+e[15]+" svelte-18w5ayy"),g(q,"id","filler"),q.disabled=_=e[11]==="",g(q,"class","btn w-full text-lg 2xl:btn-md"),g(E,"class","label-text text-xs text-neutral-content 2xl:text-base"),g(x,"class","label pt-8"),g(H,"class","grid grid-cols-9 grid-rows-10 items-center justify-center gap-1"),g(ne,"class","m-1 h-4 w-4 rounded 2xl:h-6 2xl:w-6"),we(ne,"background",e[13]),j.disabled=pe=e[13]==="",g(j,"class","btn flex w-full flex-row items-center"),g(xe,"class","label-text text-xs text-neutral-content 2xl:text-base"),g(ue,"class","label pt-8"),g(Be,"id","world-map"),g(Be,"class","grid h-[166px] w-[166px] grid-cols-12 grid-rows-12 gap-0.5 self-center svelte-18w5ayy"),g(lt,"class","twa twa-chequered-flag"),g(Le,"class","btn mt-1 flex w-full flex-row items-center"),g(i,"class","flex flex-col gap-2"),g(t,"class","flex flex-col")},m(L,se){O(L,t,se),w(t,n),w(n,r),w(t,l),w(t,i),w(i,o),Me(s,o,null),w(o,a),w(o,u),w(u,c),w(c,f),w(o,h),w(o,b);for(let F=0;F<2;F+=1)it[F]&&it[F].m(b,null);ut(b,e[6],!0),w(o,k),w(o,d),w(d,v),w(v,m),w(o,A),w(o,y);for(let F=0;F<he.length;F+=1)he[F]&&he[F].m(y,null);ut(y,e[5],!0),w(i,D),w(i,z),w(z,U),w(z,ee),w(i,G),w(i,q),w(q,K),w(q,Y),w(i,I),w(i,x),w(x,E),w(E,C),w(i,V),w(i,H);for(let F=0;F<de.length;F+=1)de[F]&&de[F].m(H,null);w(i,M),w(i,j),w(j,ae),w(j,ne),w(j,re),w(i,fe),w(i,ue),w(ue,xe),w(xe,gt),w(i,bt),w(i,Be);for(let F=0;F<_e.length;F+=1)_e[F]&&_e[F].m(Be,null);w(i,vt),w(i,Le),w(Le,Bt),w(Le,lt),B=!0,wt||(Rn=[W(n,"click",e[32]),W(b,"change",e[39]),W(y,"change",e[40]),W(z,"click",e[29]),W(q,"click",e[28]),W(j,"click",e[42]),W(Le,"click",e[44])],wt=!0)},p(L,se){if(se[0]&64&&ut(b,L[6]),se[0]&67108864){ot=L[26];let F;for(F=0;F<ot.length;F+=1){const ie=qr(L,ot,F);he[F]?he[F].p(ie,se):(he[F]=Gr(ie),he[F].c(),he[F].m(y,null))}for(;F<he.length;F+=1)he[F].d(1);he.length=ot.length}if(se[0]&67108896&&ut(y,L[5]),(!B||se[0]&32)&&X!==(X=L[27][L[5]]+"")&&dt(ee,X),(!B||se[0]&32768&&Q!==(Q="twa twa-"+L[15]+" svelte-18w5ayy"))&&g(Y,"class",Q),(!B||se[0]&2048&&_!==(_=L[11]===""))&&(q.disabled=_),se[0]&12288){st=Jn;let F;for(F=0;F<st.length;F+=1){const ie=Ur(L,st,F);de[F]?de[F].p(ie,se):(de[F]=Yr(ie),de[F].c(),de[F].m(H,null))}for(;F<de.length;F+=1)de[F].d(1);de.length=st.length}if(se[0]&8192&&we(ne,"background",L[13]),(!B||se[0]&8192&&pe!==(pe=L[13]===""))&&(j.disabled=pe),se[0]&4100){at={length:Ve*Ve};let F;for(F=0;F<at.length;F+=1){const ie=Lr(L,at,F);_e[F]?_e[F].p(ie,se):(_e[F]=Wr(ie),_e[F].c(),_e[F].m(Be,null))}for(;F<_e.length;F+=1)_e[F].d(1);_e.length=at.length}},i(L){B||(te(s.$$.fragment,L),B=!0)},o(L){le(s.$$.fragment,L),B=!1},d(L){L&&p(t),Ce(s),be(it,L),be(he,L),be(de,L),be(_e,L),wt=!1,Ae(Rn)}}}function ou(e){let t,n;return{c(){t=T("option"),n=J(e[71]),this.h()},l(r){t=N(r,"OPTION",{});var l=S(t);n=Z(l,e[71]),l.forEach(p),this.h()},h(){t.__value=e[71],t.value=t.__value},m(r,l){O(r,t,l),w(t,n)},p:ce,d(r){r&&p(t)}}}function Gr(e){let t,n=e[71]+"",r;return{c(){t=T("option"),r=J(n),this.h()},l(l){t=N(l,"OPTION",{});var i=S(t);r=Z(i,n),i.forEach(p),this.h()},h(){t.__value=e[71],t.value=t.__value},m(l,i){O(l,t,i),w(t,r)},p:ce,d(l){l&&p(t)}}}function Yr(e){let t,n,r,l,i;function o(){return e[41](e[67])}return{c(){t=T("button"),this.h()},l(s){t=N(s,"BUTTON",{class:!0}),S(t).forEach(p),this.h()},h(){t.disabled=n=e[68],g(t,"class",r="h-5 w-5 rounded-sm border border-black duration-75 ease-out "+(e[68]?"":"hover:scale-125")+" 2xl:h-6 2xl:w-6"),we(t,"background-color",e[67])},m(s,a){O(s,t,a),l||(i=W(t,"click",o),l=!0)},p(s,a){e=s,a[0]&4096&&n!==(n=e[68])&&(t.disabled=n),a[0]&4096&&r!==(r="h-5 w-5 rounded-sm border border-black duration-75 ease-out "+(e[68]?"":"hover:scale-125")+" 2xl:h-6 2xl:w-6")&&g(t,"class",r)},d(s){s&&p(t),l=!1,i()}}}function jr(e){let t;return{c(){t=T("i"),this.h()},l(n){t=N(n,"I",{class:!0}),S(t).forEach(p),this.h()},h(){g(t,"class","twa twa-chequered-flag")},m(n,r){O(n,t,r)},d(n){n&&p(t)}}}function Wr(e){let t,n,r,l,i=e[12].ssi==e[66]&&jr();function o(){return e[43](e[66])}return{c(){t=T("button"),i&&i.c(),n=R(),this.h()},l(s){t=N(s,"BUTTON",{title:!0,class:!0});var a=S(t);i&&i.l(a),n=P(a),a.forEach(p),this.h()},h(){g(t,"title",`Section #${e[66]}`),g(t,"class","relative h-[16px] w-[16px] duration-75 ease-out svelte-18w5ayy"),_t(t,"selected",e[59]),we(t,"background-color",e[12].dbg)},m(s,a){O(s,t,a),i&&i.m(t,null),w(t,n),r||(l=W(t,"click",o),r=!0)},p(s,a){e=s,e[12].ssi==e[66]?i||(i=jr(),i.c(),i.m(t,n)):i&&(i.d(1),i=null),a[0]&4&&_t(t,"selected",e[59]),a[0]&4096&&we(t,"background-color",e[12].dbg)},d(s){s&&p(t),i&&i.d(),r=!1,l()}}}function su(e){let t,n,r;return n=new za({}),{c(){t=T("div"),Ie(n.$$.fragment),this.h()},l(l){t=N(l,"DIV",{class:!0});var i=S(t);De(n.$$.fragment,i),i.forEach(p),this.h()},h(){g(t,"class","flex flex-col justify-center px-8")},m(l,i){O(l,t,i),Me(n,t,null),r=!0},p:ce,i(l){r||(te(n.$$.fragment,l),r=!0)},o(l){le(n.$$.fragment,l),r=!1},d(l){l&&p(t),Ce(n)}}}function au(e){let t,n,r;return n=new Ql({props:{sectionIndex:e[2],copyMode:e[5],emojiMode:e[6]}}),{c(){t=T("div"),Ie(n.$$.fragment),this.h()},l(l){t=N(l,"DIV",{class:!0});var i=S(t);De(n.$$.fragment,i),i.forEach(p),this.h()},h(){g(t,"class","flex flex-col justify-center px-8")},m(l,i){O(l,t,i),Me(n,t,null),r=!0},p(l,i){const o={};i[0]&4&&(o.sectionIndex=l[2]),i[0]&32&&(o.copyMode=l[5]),i[0]&64&&(o.emojiMode=l[6]),n.$set(o)},i(l){r||(te(n.$$.fragment,l),r=!0)},o(l){le(n.$$.fragment,l),r=!1},d(l){l&&p(t),Ce(n)}}}function Kr(e){let t,n,r,l,i,o;function s(){return e[46](e[50])}return{c(){t=T("button"),n=T("i"),r=R(),this.h()},l(a){t=N(a,"BUTTON",{class:!0});var u=S(t);n=N(u,"I",{class:!0}),S(n).forEach(p),r=P(u),u.forEach(p),this.h()},h(){g(n,"class","twa twa-"+e[50]+" text-2xl svelte-18w5ayy"),g(t,"class",l=(e[50]===e[0]?"scale-125":"opacity-50 hover:scale-125 hover:opacity-100")+" duration-75 ease-out")},m(a,u){O(a,t,u),w(t,n),w(t,r),i||(o=W(t,"click",s),i=!0)},p(a,u){e=a,u[0]&1&&l!==(l=(e[50]===e[0]?"scale-125":"opacity-50 hover:scale-125 hover:opacity-100")+" duration-75 ease-out")&&g(t,"class",l)},d(a){a&&p(t),i=!1,o()}}}function Jr(e){let t,n,r,l;function i(){return e[47](e[59],e[58])}return{c(){t=T("button"),this.h()},l(o){t=N(o,"BUTTON",{class:!0}),S(t).forEach(p),this.h()},h(){g(t,"class",n="brutal h-6 w-6 rounded duration-75 ease-out "+(e[59]?"scale-125":"hover:scale-125")),we(t,"background",e[57])},m(o,s){O(o,t,s),r||(l=W(t,"click",i),r=!0)},p(o,s){e=o,s[0]&8388608&&n!==(n="brutal h-6 w-6 rounded duration-75 ease-out "+(e[59]?"scale-125":"hover:scale-125"))&&g(t,"class",n)},d(o){o&&p(t),r=!1,l()}}}function Zr(e){let t,n,r=ct[e[50]],l=[];for(let i=0;i<r.length;i+=1)l[i]=$r(Vr(e,r,i));return{c(){t=T("div");for(let i=0;i<l.length;i+=1)l[i].c();n=R(),this.h()},l(i){t=N(i,"DIV",{class:!0});var o=S(t);for(let s=0;s<l.length;s+=1)l[s].l(o);n=P(o),o.forEach(p),this.h()},h(){g(t,"class","emojis flex flex-wrap justify-center")},m(i,o){O(i,t,o);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(t,null);w(t,n)},p(i,o){if(o[0]&41945090){r=ct[i[50]];let s;for(s=0;s<r.length;s+=1){const a=Vr(i,r,s);l[s]?l[s].p(a,o):(l[s]=$r(a),l[s].c(),l[s].m(t,n))}for(;s<l.length;s+=1)l[s].d(1);l.length=r.length}},d(i){i&&p(t),be(l,i)}}}function Qr(e){let t,n,r,l,i;function o(){return e[48](e[53])}return{c(){t=T("button"),n=T("i"),this.h()},l(s){t=N(s,"BUTTON",{title:!0,class:!0});var a=S(t);n=N(a,"I",{class:!0}),S(n).forEach(p),a.forEach(p),this.h()},h(){g(n,"class",r="twa twa-"+e[53].replace("_",e[23])+" svelte-18w5ayy"),g(t,"title",e[54]),g(t,"class","svelte-18w5ayy"),_t(t,"selected",e[11]===e[53])},m(s,a){O(s,t,a),w(t,n),l||(i=W(t,"click",o),l=!0)},p(s,a){e=s,a[0]&8388608&&r!==(r="twa twa-"+e[53].replace("_",e[23])+" svelte-18w5ayy")&&g(n,"class",r),a[0]&2048&&_t(t,"selected",e[11]===e[53])},d(s){s&&p(t),l=!1,i()}}}function $r(e){let t=e[54].includes(e[1]),n,r=t&&Qr(e);return{c(){r&&r.c(),n=Se()},l(l){r&&r.l(l),n=Se()},m(l,i){r&&r.m(l,i),O(l,n,i)},p(l,i){i[0]&2&&(t=l[54].includes(l[1])),t?r?r.p(l,i):(r=Qr(l),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(l){r&&r.d(l),l&&p(n)}}}function el(e){let t,n=e[0]===e[50]&&Zr(e);return{c(){n&&n.c(),t=Se()},l(r){n&&n.l(r),t=Se()},m(r,l){n&&n.m(r,l),O(r,t,l)},p(r,l){r[0]===r[50]?n?n.p(r,l):(n=Zr(r),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&p(t)}}}function uu(e){let t,n,r,l,i,o,s,a,u;Tt(e[35]);let c=e[14].currentSaveID!=""&&Hr(e);return{c(){t=R(),n=T("div"),r=T("i"),i=R(),c&&c.c(),o=Se(),this.h()},l(f){Vl("svelte-1evbouv",document.head).forEach(p),t=P(f),n=N(f,"DIV",{class:!0,style:!0});var b=S(n);r=N(b,"I",{class:!0}),S(r).forEach(p),b.forEach(p),i=P(f),c&&c.l(f),o=Se(),this.h()},h(){document.title="Emojistan | Editor",g(r,"class",l="twa twa-"+e[15]+" svelte-18w5ayy"),g(n,"class","absolute z-50 flex h-6 w-6 items-center justify-center text-lg"),we(n,"transform","translate("+(e[9]+12)+"px, "+(e[10]-12)+"px)"),we(n,"background",e[13]||"none")},m(f,h){O(f,t,h),O(f,n,h),w(n,r),O(f,i,h),c&&c.m(f,h),O(f,o,h),s=!0,a||(u=[W(window,"mousemove",e[34]),W(window,"keydown",e[24]),W(window,"resize",e[35])],a=!0)},p(f,h){(!s||h[0]&32768&&l!==(l="twa twa-"+f[15]+" svelte-18w5ayy"))&&g(r,"class",l),(!s||h[0]&1536)&&we(n,"transform","translate("+(f[9]+12)+"px, "+(f[10]-12)+"px)"),(h[0]&1536||h[0]&9728)&&we(n,"background",f[13]||"none"),f[14].currentSaveID!=""?c?(c.p(f,h),h[0]&16384&&te(c,1)):(c=Hr(f),c.c(),te(c,1),c.m(o.parentNode,o)):c&&(Je(),le(c,1,1,()=>{c=null}),Ze())},i(f){s||(te(c),s=!0)},o(f){le(c),s=!1},d(f){f&&p(t),f&&p(n),f&&p(i),c&&c.d(f),f&&p(o),a=!1,Ae(u)}}}function cu(e,t,n){let r,l,i,o,s,a,u,c,f,h,b,k,d,v;$(e,He,B=>n(11,r=B)),$(e,oe,B=>n(12,l=B)),$(e,ft,B=>n(13,i=B)),$(e,Yt,B=>n(14,o=B)),$(e,Zn,B=>n(49,s=B)),$(e,nl,B=>n(15,a=B)),$(e,bn,B=>n(16,u=B)),$(e,gn,B=>n(17,c=B)),$(e,pn,B=>n(18,f=B)),$(e,Gt,B=>n(19,h=B)),$(e,_n,B=>n(20,b=B)),$(e,mn,B=>n(21,k=B)),$(e,Ee,B=>n(22,d=B)),$(e,dn,B=>n(23,v=B)),en(()=>{if(o.currentSaveID===""){if(!Yt.useStorage()){Rl("/",{replaceState:!0}),Te.info("Failed to find save file.");return}}else ge(Zn,s=!1,s);for(let B of[oe,bn,gn,mn,Gt,pn,_n,St,Ee,Nt])B.useStorage(o.currentSaveID)});let m="pile-of-poo",A="",y=0;function D(B){B.code==="Escape"&&(ge(He,r="",r),ge(ft,i="",i))}function z(B){ge(He,r=B===r?"":B,r),Nt.add(B)}let U,X;const ee=["Emoji","Color","Both"],G={Emoji:"EMOJIS",Color:"COLORS",Both:"ALL"};let q=ee[2],K="Foreground";function Y(){if(r!==""){for(let B=0;B<Ve*Ve;B++)l.items.set(y+"_"+B,r);oe.set(l)}}function Q(){switch(q){case"Emoji":oe.clearItems(y);break;case"Color":oe.clearColors(y);break;case"Both":oe.clearAll(y);break}}let _=!1;const I={editor:"world-map|Map Editor",rules:"books|Ruleboxes",dialogue:"speech-balloon|Dialogue Editor",publish:"floppy-disk|Publish"};let x="editor";function E(B){n(8,x=B)}function C(){if(!oe.hasControllable()){Te.warning("No controllable found in the starting section.");return}n(7,_=!_),_||ge(He,r="",r)}let[V,H]=[0,0];const M=[["#ffdc5d",""],["#f7d7c4","-light-skin-tone"],["#d8b094","-medium-light-skin-tone"],["#bb9167","-medium-skin-tone"],["#8e562e","-medium-dark-skin-tone"],["#613d30","-dark-skin-tone"]],j=B=>{n(9,V=B.clientX),n(10,H=B.clientY)};function ae(){n(3,U=window.innerWidth),n(4,X=window.innerHeight)}const ne=()=>{n(7,_=!1),Te.warning("No controllable player in the map.")},re=()=>{n(7,_=!1)},pe=B=>E(B);function fe(){K=hn(this),n(6,K)}function ue(){q=hn(this),n(5,q),n(26,ee)}const xe=B=>{ge(ft,i=i===B?"":B,i)},gt=()=>{if(i!==""){if(i===l.dbg){oe.updateDefaultColor(Ul);return}oe.updateDefaultColor(i),oe.filterColors()}},bt=B=>n(2,y=B),Be=()=>oe.updateStartingSection(y);function vt(){A=this.value,n(1,A)}return[m,A,y,U,X,q,K,_,x,V,H,r,l,i,o,a,u,c,f,h,b,k,d,v,D,z,ee,G,Y,Q,I,E,C,M,j,ae,ne,re,pe,fe,ue,xe,gt,bt,Be,vt,B=>n(0,m=B),(B,wt)=>{ge(dn,v=B?"":wt,v)},B=>z(B)]}class wu extends Qe{constructor(t){super(),$e(this,t,cu,uu,Ye,{},null,[-1,-1,-1])}}export{wu as component};
